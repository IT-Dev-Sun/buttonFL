{"version":3,"sources":["node_modules\\lodash-es\\isArray.js","node_modules\\lodash-es\\_freeGlobal.js","node_modules\\lodash-es\\_root.js","node_modules\\lodash-es\\_Symbol.js","node_modules\\lodash-es\\_getRawTag.js","node_modules\\lodash-es\\_objectToString.js","node_modules\\lodash-es\\_baseGetTag.js","node_modules\\lodash-es\\isObjectLike.js","node_modules\\lodash-es\\isSymbol.js","node_modules\\lodash-es\\_isKey.js","node_modules\\lodash-es\\isObject.js","node_modules\\lodash-es\\isFunction.js","node_modules\\lodash-es\\_coreJsData.js","node_modules\\lodash-es\\_isMasked.js","node_modules\\lodash-es\\_toSource.js","node_modules\\lodash-es\\_baseIsNative.js","node_modules\\lodash-es\\_getValue.js","node_modules\\lodash-es\\_getNative.js","node_modules\\lodash-es\\_nativeCreate.js","node_modules\\lodash-es\\_hashClear.js","node_modules\\lodash-es\\_hashDelete.js","node_modules\\lodash-es\\_hashGet.js","node_modules\\lodash-es\\_hashHas.js","node_modules\\lodash-es\\_hashSet.js","node_modules\\lodash-es\\_Hash.js","node_modules\\lodash-es\\_listCacheClear.js","node_modules\\lodash-es\\eq.js","node_modules\\lodash-es\\_assocIndexOf.js","node_modules\\lodash-es\\_listCacheDelete.js","node_modules\\lodash-es\\_listCacheGet.js","node_modules\\lodash-es\\_listCacheHas.js","node_modules\\lodash-es\\_listCacheSet.js","node_modules\\lodash-es\\_ListCache.js","node_modules\\lodash-es\\_Map.js","node_modules\\lodash-es\\_mapCacheClear.js","node_modules\\lodash-es\\_isKeyable.js","node_modules\\lodash-es\\_getMapData.js","node_modules\\lodash-es\\_mapCacheDelete.js","node_modules\\lodash-es\\_mapCacheGet.js","node_modules\\lodash-es\\_mapCacheHas.js","node_modules\\lodash-es\\_mapCacheSet.js","node_modules\\lodash-es\\_MapCache.js","node_modules\\lodash-es\\memoize.js","node_modules\\lodash-es\\_memoizeCapped.js","node_modules\\lodash-es\\_stringToPath.js","node_modules\\lodash-es\\_arrayMap.js","node_modules\\lodash-es\\_baseToString.js","node_modules\\lodash-es\\toString.js","node_modules\\lodash-es\\_castPath.js","node_modules\\lodash-es\\_toKey.js","node_modules\\lodash-es\\_baseGet.js","node_modules\\lodash-es\\get.js","node_modules\\lodash-es\\_overArg.js","node_modules\\lodash-es\\_getPrototype.js","node_modules\\lodash-es\\isPlainObject.js","node_modules\\lodash-es\\last.js","node_modules\\@theatre\\dataverse\\dist\\index.js","node_modules\\@theatre\\core\\dist\\index.js","src\\component.ts"],"names":["isArray","Array","freeGlobal","global","Object","freeSelf","self","root","Function","Symbol","objectProto","prototype","hasOwnProperty","nativeObjectToString","toString","symToStringTag","toStringTag","undefined","getRawTag","value","isOwn","call","tag","unmasked","e","result","objectToString","nullTag","undefinedTag","baseGetTag","isObjectLike","symbolTag","isSymbol","reIsDeepProp","reIsPlainProp","isKey","object","type","test","isObject","asyncTag","funcTag","genTag","proxyTag","isFunction","coreJsData","maskSrcKey","uid","exec","keys","IE_PROTO","isMasked","func","funcProto","funcToString","toSource","reRegExpChar","reIsHostCtor","reIsNative","RegExp","replace","baseIsNative","pattern","getValue","key","getNative","nativeCreate","hashClear","__data__","size","hashDelete","has","HASH_UNDEFINED","hashGet","data","hashHas","hashSet","Hash","entries","index","length","clear","entry","set","get","listCacheClear","eq","other","assocIndexOf","array","arrayProto","splice","listCacheDelete","lastIndex","pop","listCacheGet","listCacheHas","listCacheSet","push","ListCache","Map","mapCacheClear","isKeyable","getMapData","map","mapCacheDelete","mapCacheGet","mapCacheHas","mapCacheSet","MapCache","FUNC_ERROR_TEXT","memoize","resolver","TypeError","memoized","args","arguments","apply","cache","Cache","MAX_MEMOIZE_SIZE","memoizeCapped","rePropName","reEscapeChar","stringToPath","string","charCodeAt","match","number","quote","subString","arrayMap","iteratee","INFINITY","symbolProto","symbolToString","baseToString","castPath","toKey","baseGet","path","defaultValue","overArg","transform","arg","getPrototype","getPrototypeOf","objectTag","objectCtorString","isPlainObject","proto","Ctor","constructor","last","__create","create","__defProp","defineProperty","__defProps","defineProperties","__getOwnPropDesc","getOwnPropertyDescriptor","__getOwnPropDescs","getOwnPropertyDescriptors","__getOwnPropNames","getOwnPropertyNames","__getOwnPropSymbols","getOwnPropertySymbols","__getProtoOf","__hasOwnProp","__propIsEnum","propertyIsEnumerable","__defNormalProp","obj","enumerable","configurable","writable","__spreadValues","a","b","prop","__spreadProps","__markAsModule","target","__export","all","name","__reExport","module2","desc","__toModule","__esModule","default","exports","AbstractDerivation","Atom","Box","ConstantDerivation","DerivationFromSource","PointerProxy","Ticker","getPointerParts","isDerivation","isPointer","iterateAndCountTicks","iterateOver","pointer","pointer_default","prism","prism_default","val","valueDerivation","import_get","require","import_isPlainObject","import_last","Tappable","props","_untapFromSourceTimeout","_cb","_tappers","forEach","cb","_lastTapperId","_untapFromSource","_props","_check","_scheduleToUntapFromSource","tapToSource","setTimeout","tap","tapperId","_removeTapperById","id","delete","Emitter","tappable","_tap","_onNumberOfTappersChangeListener","oldSize","newSize","emit","payload","hasTappers","onNumberOfTappersChange","DerivationEmitter","derivation","ticker","_possiblyMarkAsStale","_ticker","onThisOrNextTick","_refresh","newValue","_derivation","_lastValue","_lastValueRecorded","_emitter","_reactToNumberOfTappersChange","_hadTappers","addDependent","removeDependent","DerivationValuelessEmitter","dontEmitValues","d","UPDATE_NEEDED_FROM","UPDATE_NEEDED_FROM2","makeFlatMapDerivationClass","FlatMapDerivation","_depDerivation","_fn","_innerDerivation","_staleDependency","_addDependency","_recalculateHot","updateNeededFrom","possibleInnerDerivation","_recalculateCold","_recalculate","isHot","_reactToDependencyBecomingStale","msgComingFrom","Error","_removeInnerDerivation","_removeDependency","_keepHot","_becomeCold","displayName","cls","flatMap","dep","fn","makeMapDerivationClass","MapDerivation","_dep","cls2","flatMap2","Stack","_head","peek","head","next","node","createMechanism","noop2","stack","noopCollector","pushCollector2","collector","popCollector2","existing","startIgnoringDependencies2","stopIgnoringDependencies2","console","warn","reportResolutionStart2","possibleCollector","reportResolutionEnd2","_d","startIgnoringDependencies","stopIgnoringDependencies","reportResolutionStart","reportResolutionEnd","pushCollector","popCollector","getSharedMechanism","varName","window","existingMechanism","mechanism","_didMarkDependentsAsStale","_isHot","_isFresh","_dependents","Set","_dependencies","_internal_markAsStale","which","dependent","add","changes","changesWithoutValues","keepHot","tapImmediate","untap","hadDepsBefore","hasDepsNow","_reactToNumberOfDependentsChange","_markAsStale","shouldBecomeHot","noop","_tapToSource","_getValueFromSource","_untapFromChanges","_cachedValue","_hasCachedValue","pointerMetaWeakMap","WeakMap","pointerMetaSymbol","cachedSubPointersWeakMap","handler","subs","meta","subPointer","getPointerMeta","p","_a","hiddenObj","Proxy","updateDeep","state2","reducer","hoop","s","restOfPath","parseInt","String","isNaN","oldVal","newVal","newS","ValueTypes","ValueTypes2","getTypeOfValue","v","getKeyOfValue","vType","isValidArrayIndex","inNumber","Infinity","Scope","_parent","_path","children","identityChangeListeners","addIdentityChangeListener","removeIdentityChangeListener","_checkForGC","removeChild","getChild","getOrCreateChild","child","concat","initialState","$$isIdentityDerivationProvider","reduceState","newState","getState","setState","_onPathValueChange","scope2","_getOrCreateScopeForPath","_currentState","_rootScope","oldState","_checkUpdates","getIn","setIn","val2","oldValueType","newValueType","childScope","childKey","oldChildVal","newChildVal","curScope","pathEl","getIdentityDerivation","listener","identityDerivationWeakMap","pointer2","isIdentityChangeProvider","pointerOrDerivationOrPlainValue","_value","_publicDerivation","bind","_v","pointerOrDerivation","ticksCountedSinceLastYield","ticks","_ticking","_scheduledForThisOrNextTick","_scheduledForNextTick","_timeAtCurrentTick","onNextTick","offThisOrNextTick","offNextTick","time","performance","now","tick","t","_tick","iterationNumber","oldSet","voidFn","PrismDerivation","_cacheOfDendencyValues","_possiblyStaleDeps","_prismScope","PrismScope","anActuallyStaleDepWasFound","newDeps","observedDep","hookScopeStack","error","topOfTheStack","cleanupScopeStack","isPrismScope","_subs","sub","_","sub2","cleanupEffects","effects","effectsWeakMap","k","effect2","safelyRun","cleanup","returnValueInCaseOfError","returnValue","success","refsWeakMap","memosWeakMap","ref","initialValue","refs","ref2","current","effect","deps","depsHaveChanged","oldDeps","some","el","i","memo","memos","cachedValue","memo2","state","setValue","b2","setValue2","ensurePrism","scope","parentScope","subScope","ret","inPrism","currentPointer","_currentPointerBox","setPointer","reduce","pointerSoFar","pathItem","a2","__objRest","source","exclude","indexOf","__commonJS","mod","__require","__publicField","require_UnitBezier","UnitBezier2","UnitBezier3","p1x","p1y","p2x","p2y","_cx","_bx","_ax","_cy","_by","_ay","epsilon","_sampleCurveX","t3","_sampleCurveY","_sampleCurveDerivativeX","_solveCurveX","x2","d2","i2","t0","t1","t22","x22","Math","abs","solve","solveSimple","require_levenshtein_edit_distance","codes","levenshtein","insensitive","lengthOther","code","distance","distanceOther","indexOther","toLowerCase","require_propose","propose2","ratio","proposed","threshold","ignoreCase","max_ratio","word","dictionary","len","options","require_fast_deep_equal","equal","flags","valueOf","getProject","onChange","types","propTypes_exports","coreExports_exports","import_dataverse","ProjectsSingleton","projects","project","atom","singleton","projectsSingleton_default","publicAPIToPrivateAPIMap","privateAPI","pub","setPrivateAPI","priv","emptyArray","isArray_default","freeGlobal_default","root_default","Symbol2","Symbol_default","e2","getRawTag_default","objectProto2","nativeObjectToString2","objectToString_default","symToStringTag2","baseGetTag_default","isObjectLike_default","isSymbol_default","isKey_default","isObject_default","isFunction_default","coreJsData_default","isMasked_default","toSource_default","funcProto2","objectProto3","funcToString2","hasOwnProperty2","baseIsNative_default","getValue_default","getNative_default","nativeCreate_default","hashClear_default","hashDelete_default","objectProto4","hasOwnProperty3","hashGet_default","objectProto5","hasOwnProperty4","hashHas_default","HASH_UNDEFINED2","hashSet_default","Hash_default","listCacheClear_default","eq_default","assocIndexOf_default","listCacheDelete_default","listCacheGet_default","listCacheHas_default","listCacheSet_default","ListCache_default","Map2","Map_default","mapCacheClear_default","isKeyable_default","getMapData_default","mapCacheDelete_default","mapCacheGet_default","mapCacheHas_default","mapCacheSet_default","MapCache_default","memoize_default","memoizeCapped_default","string2","number2","stringToPath_default","arrayMap_default","baseToString_default","toString_default","castPath_default","INFINITY2","toKey_default","baseGet_default","get_default","getDeep","v2","SimpleCache","producer","_values","import_dataverse7","defineProperty_default","baseAssignValue","baseAssignValue_default","objectProto6","hasOwnProperty5","assignValue","objValue","assignValue_default","MAX_SAFE_INTEGER","reIsUint","isIndex","isIndex_default","baseSet","customizer","nested","baseSet_default","set_default","cachedDefaults","getPropDefaultsOfSheetObject","config","getDefaultsOfPropTypeConfig","generated","generateDefaultsForCompound","generateDefaultsForEnum","defaults","$case","defaultCase","case_","caseConf","cases","propConf","import_dataverse2","logger","log","trace","logger_default","import_UnitBezier","trackValueAtTime","trackP","timeD","track","driverD","trackValueAtTime_basicKeyframedTrack","stateRef","started","validFrom","validTo","pp","der","undefinedConstD","progressionD","progression","keyframes","currentKeyframeIndex","currentKeyframe","states","isLastKeyframe","position","beforeFirstKeyframe","lastKeyframe","between","nextKeyframeIndex","kf","left","right","connectedRight","solver","handles","globalProgressionToLocalProgression","globalProgression","valueProgression","deepMergeWithCache","base","override","_cache","possibleCachedValue","merged","valueInOverride","valueInBase","pointerDeep","toAppend","p2","k2","import_dataverse3","valToAtom","vals","import_dataverse6","import_dataverse4","coreTicker","coreTicker_default","onAnimationFrame","requestAnimationFrame","import_dataverse5","TheatreSheetObject","internals","propsP","sheet","publicApi","address","_valuesDerivation","sheetObject","getValues","onValuesChange","fn2","val6","setInitialValue","SheetObject","template","nativeObject","sheetInstanceId","getDefaultValues","initial","_initialValue","withInitialCache","withInitial","statics","getStaticValues","withStaticsCache","withStatics","final","sequenced","pointerToSequencedValuesD","getSequencedValues","withSeqsCache","withSeqs","getValueByPointer","allValuesP","tracksToProcessD","getArrayOfValidSequenceTracks","tracksToProcess","valsAtom","untaps","trackId","pathToProp","_trackIdToDerivation","updateSequenceValueFromItsDerivation","pointers","historic","sheetsById","sheetId","sequence","tracksByObject","objectKey","trackData","getSequence","positionDerivation","validateValue","SheetObjectTemplate","sheetTemplate","_config","createInstance","overrideConfig","pointerToSheetState","staticOverrides","byObject","trackIdByPropPath","arrayOfIds","pathToPropInString","JSON","parse","stringify","getMapOfValidSequenceTracks_forStudio","arr","getDefaultsAtPointer","defaultsAtPath","import_dataverse12","import_propose","didYouMean","str","prepend","append","TheatreError","InvalidArgumentError","import_dataverse10","reWhitespace","trimmedEndIndex","charAt","trimmedEndIndex_default","reTrimStart","baseTrim","slice","baseTrim_default","NAN","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","toNumber","isBinary","toNumber_default","INFINITY3","MAX_INTEGER","toFinite","sign","toFinite_default","toInteger","remainder","toInteger_default","overArg_default","getPrototype_default","funcProto3","objectProto7","funcToString3","hasOwnProperty6","isPlainObject_default","baseSlice","start","end","baseSlice_default","castSlice","castSlice_default","rsAstralRange","rsComboMarksRange","reComboHalfMarksRange","rsComboSymbolsRange","rsComboRange","rsVarRange","rsZWJ","reHasUnicode","hasUnicode","hasUnicode_default","asciiToArray","split","asciiToArray_default","rsAstralRange2","rsComboMarksRange2","reComboHalfMarksRange2","rsComboSymbolsRange2","rsComboRange2","rsVarRange2","rsAstral","rsCombo","rsFitz","rsModifier","rsNonAstral","rsRegional","rsSurrPair","rsZWJ2","reOptMod","rsOptVar","rsOptJoin","join","rsSeq","rsSymbol","reUnicode","unicodeToArray","unicodeToArray_default","stringToArray","stringToArray_default","baseProperty","baseProperty_default","MAX_SAFE_INTEGER2","nativeFloor","floor","baseRepeat","n2","baseRepeat_default","asciiSize","asciiSize_default","rsAstralRange3","rsComboMarksRange3","reComboHalfMarksRange3","rsComboSymbolsRange3","rsComboRange3","rsVarRange3","rsAstral2","rsCombo2","rsFitz2","rsModifier2","rsNonAstral2","rsRegional2","rsSurrPair2","rsZWJ3","reOptMod2","rsOptVar2","rsOptJoin2","rsSeq2","rsSymbol2","reUnicode2","unicodeSize","unicodeSize_default","stringSize","stringSize_default","nativeCeil","ceil","createPadding","chars","charsLength","createPadding_default","padStart","strLength","padStart_default","defer","resolve","reject","promise","Promise","rs","rj","deferred","status","noop_default","import_dataverse8","DefaultPlaybackController","statePointer","_state","destroy","pause","_stopPlayCallback","playing","gotoPosition","_updatePositionInState","getCurrentPosition","play","iterationCount","range","rate","direction","iterationLength","startPos","initialTickerTime","totalPlaybackLength","initialElapsedPos","currentTickerTime","elapsedTickerTime","max","elapsedTickerTimeInSeconds","elapsedPos","min","currentIterationPos","isCurrentIterationNumberEven","requestNextTick","isLastIterationEven","import_dataverse9","AudioPlaybackController","_decodedBuffer","_audioContext","_nodeDestination","_mainGain","createGain","connect","currentSource","createBufferSource","buffer","playbackRate","loop","loopStart","loopEnd","stop","disconnect","TheatreSequence","conf","_project","isReady","attachAudio","audioContext","destinationNode","decodedBuffer","resolveAudioBuffer","playbackController","replacePlaybackController","AudioContext","decodedBufferDeferred","AudioBuffer","fetchResponse","fetch","arrayBuffer","decodeAudioData","destination","possibleDirections","Sequence","_sheet","_lengthD","_subUnitsPerUnitD","posInUnitSpace","subUnitsPerUnit","gridLength","parseFloat","round","toFixed","sequenceName","_playbackControllerBox","_statePointerDerivation","playbackController2","_positionD","_positionFormatterD","TimeBasedPositionFormatter","positionFormatter","derivationToStatePointer","positionSnappedToGrid","closestGridPosition","requestedPosition","dur","getDurationCold","_makeRangeFromSequenceTemplate","sequenceDuration","Number","isInteger","_play","oldController","_fps","formatSubUnitForGrid","subSecondPos","frame","frames","formatFullUnitForGrid","s2","hour","hours","minute","minutes","second","seconds","formatForPlayhead","frameLength","formatBasic","boolean","compound","stringLiteral","ellipsify","maxLength","substr","userReadableTypeOfValue","userReadableTypeOfValue_default","propTypeSymbol","isLonghandPropType","toLonghandProp","sanitizeCompoundProps","sanitizedProps","validateCommonOpts","fnCallSignature","opts","label","trim","valueType","isFinite","every","nudgeMultiplier","nudgeFn","defaultNumberNudgeFn","as","deltaX","deltaFraction","magnitude","sanifySlashedPath","getValidationErrorsOfSlashedPath","components","component","validateAndSanitiseSlashedPathOrThrow","unsanitisedPath","fnName","sanitisedPath","validation","import_fast_deep_equal","weakMapOfUnsanitizedProps","TheatreSheet","internal","sanitizedPath","existingObject","getObject","prevConfig","sanitizedConfig","createObject","import_dataverse11","Sheet","instanceId","_objects","objTemplate","getObjectTemplate","_sequence","lengthD","subUnitsPerUnitD","SheetTemplate","_instances","_objectTemplates","getInstance","inst","import_dataverse13","import_dataverse14","delay","delay_default","n","r2","Y","o2","n3","t2","Q","r","Z","L","o","nn","r3","u","f","c","X","q","l","tn","y","h","freeze","isFrozen","rn","U","j","O","g","S","w","m","P","M","x","H","o3","A","I","t4","R","c2","D","F","z","E","N","T","e3","C","en","on","u2","revocable","revoke","f2","proxy","J","K","from","G","W","B","Reflect","for","V","iterator","ownKeys","i3","deleteProperty","setPrototypeOf","un","produce","t5","e4","then","produceWithPatches","i4","t6","useProxies","setUseProxies","autoFreeze","setAutoFreeze","createDraft","finishDraft","applyPatches","op","$","an","cn","sn","vn","pn","ln","dn","globals","currentProjectStateDefinitionVersion","globals_default","initialiseProjectState","studio","onDiskState","transaction","drafts","projectId","ephemeral","coreByProject","lastExportedObject","loadingState","ahistoric","ahistoricStuff","useInitialState","definitionVersion","revisionHistory","useOnDiskState","useBrowserState","browserStateIsNotBasedOnDiskState","onDiskState2","browserState","Project","_sheetTemplates","onDiskStateAtom","_pointerProxies","_readyDeferred","_studio","attachToStudio","studioId","initialized","atomP","isAttachedToStudio","ready","getOrCreateSheet","_validateSym","thingy","validateName","shouldThrow","validateInstanceId","TheatreProject","import_fast_deep_equal2","import_dataverse15","import_dataverse16","restOfConfig","existingProject","validateProjectIdOrThrow","shallowValidateOnDiskState","deepValidateOnDiskState","idTrimmed","callback","studioBundle","coreBundle","CoreBundle","version","getBitsForStudio","bits","projectsP","coreExports","registerCoreBundle","existingBundle","coreBundle2","possibleExistingStudioBundle"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;AAuBA,IAAIA,UAAUC,MAAMD,OAApB;;kBAEeA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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AAR,CAAa,wBAASnB,KAAT,CAAb,CAAP;AACD;;kBAEc0C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9Cf;;;;;;;;AAQA,SAASE,QAAT,CAAkB3B,MAAlB,EAA0B4B,GAA1B,EAA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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","file":"component.13daecc6.map","sourceRoot":"..","sourcesContent":["/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nexport default isArray;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nexport default freeGlobal;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nexport default root;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nexport default Symbol;\n","import Symbol from './_Symbol.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nexport default getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;\n","import Symbol from './_Symbol.js';\nimport getRawTag from './_getRawTag.js';\nimport objectToString from './_objectToString.js';\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nexport default baseGetTag;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nexport default isObjectLike;\n","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nexport default isSymbol;\n","import isArray from './isArray.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/;\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\nexport default isKey;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nexport default isObject;\n","import baseGetTag from './_baseGetTag.js';\nimport isObject from './isObject.js';\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nexport default isFunction;\n","import root from './_root.js';\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nexport default coreJsData;\n","import coreJsData from './_coreJsData.js';\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nexport default isMasked;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nexport default toSource;\n","import isFunction from './isFunction.js';\nimport isMasked from './_isMasked.js';\nimport isObject from './isObject.js';\nimport toSource from './_toSource.js';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nexport default baseIsNative;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nexport default getValue;\n","import baseIsNative from './_baseIsNative.js';\nimport getValue from './_getValue.js';\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nexport default getNative;\n","import getNative from './_getNative.js';\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nexport default nativeCreate;\n","import nativeCreate from './_nativeCreate.js';\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nexport default hashClear;\n","/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nexport default hashDelete;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nexport default hashGet;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nexport default hashHas;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nexport default hashSet;\n","import hashClear from './_hashClear.js';\nimport hashDelete from './_hashDelete.js';\nimport hashGet from './_hashGet.js';\nimport hashHas from './_hashHas.js';\nimport hashSet from './_hashSet.js';\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nexport default Hash;\n","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nexport default listCacheClear;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nexport default eq;\n","import eq from './eq.js';\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nexport default assocIndexOf;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nexport default listCacheDelete;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nexport default listCacheGet;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nexport default listCacheHas;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nexport default listCacheSet;\n","import listCacheClear from './_listCacheClear.js';\nimport listCacheDelete from './_listCacheDelete.js';\nimport listCacheGet from './_listCacheGet.js';\nimport listCacheHas from './_listCacheHas.js';\nimport listCacheSet from './_listCacheSet.js';\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nexport default ListCache;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nexport default Map;\n","import Hash from './_Hash.js';\nimport ListCache from './_ListCache.js';\nimport Map from './_Map.js';\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nexport default mapCacheClear;\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nexport default isKeyable;\n","import isKeyable from './_isKeyable.js';\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nexport default getMapData;\n","import getMapData from './_getMapData.js';\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nexport default mapCacheDelete;\n","import getMapData from './_getMapData.js';\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nexport default mapCacheGet;\n","import getMapData from './_getMapData.js';\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nexport default mapCacheHas;\n","import getMapData from './_getMapData.js';\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nexport default mapCacheSet;\n","import mapCacheClear from './_mapCacheClear.js';\nimport mapCacheDelete from './_mapCacheDelete.js';\nimport mapCacheGet from './_mapCacheGet.js';\nimport mapCacheHas from './_mapCacheHas.js';\nimport mapCacheSet from './_mapCacheSet.js';\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nexport default MapCache;\n","import MapCache from './_MapCache.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result) || cache;\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Expose `MapCache`.\nmemoize.Cache = MapCache;\n\nexport default memoize;\n","import memoize from './memoize.js';\n\n/** Used as the maximum memoize cache size. */\nvar MAX_MEMOIZE_SIZE = 500;\n\n/**\n * A specialized version of `_.memoize` which clears the memoized function's\n * cache when it exceeds `MAX_MEMOIZE_SIZE`.\n *\n * @private\n * @param {Function} func The function to have its output memoized.\n * @returns {Function} Returns the new memoized function.\n */\nfunction memoizeCapped(func) {\n  var result = memoize(func, function(key) {\n    if (cache.size === MAX_MEMOIZE_SIZE) {\n      cache.clear();\n    }\n    return key;\n  });\n\n  var cache = result.cache;\n  return result;\n}\n\nexport default memoizeCapped;\n","import memoizeCapped from './_memoizeCapped.js';\n\n/** Used to match property names within property paths. */\nvar rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoizeCapped(function(string) {\n  var result = [];\n  if (string.charCodeAt(0) === 46 /* . */) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, subString) {\n    result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\nexport default stringToPath;\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nexport default arrayMap;\n","import Symbol from './_Symbol.js';\nimport arrayMap from './_arrayMap.js';\nimport isArray from './isArray.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nexport default baseToString;\n","import baseToString from './_baseToString.js';\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nexport default toString;\n","import isArray from './isArray.js';\nimport isKey from './_isKey.js';\nimport stringToPath from './_stringToPath.js';\nimport toString from './toString.js';\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @param {Object} [object] The object to query keys on.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value, object) {\n  if (isArray(value)) {\n    return value;\n  }\n  return isKey(value, object) ? [value] : stringToPath(toString(value));\n}\n\nexport default castPath;\n","import isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nexport default toKey;\n","import castPath from './_castPath.js';\nimport toKey from './_toKey.js';\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = castPath(path, object);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\nexport default baseGet;\n","import baseGet from './_baseGet.js';\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\nexport default get;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nexport default overArg;\n","import overArg from './_overArg.js';\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nexport default getPrototype;\n","import baseGetTag from './_baseGetTag.js';\nimport getPrototype from './_getPrototype.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\nexport default isPlainObject;\n","/**\n * Gets the last element of `array`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to query.\n * @returns {*} Returns the last element of `array`.\n * @example\n *\n * _.last([1, 2, 3]);\n * // => 3\n */\nfunction last(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? array[length - 1] : undefined;\n}\n\nexport default last;\n","var __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __markAsModule = (target) => __defProp(target, \"__esModule\", { value: true });\nvar __export = (target, all) => {\n  __markAsModule(target);\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __reExport = (target, module2, desc) => {\n  if (module2 && typeof module2 === \"object\" || typeof module2 === \"function\") {\n    for (let key of __getOwnPropNames(module2))\n      if (!__hasOwnProp.call(target, key) && key !== \"default\")\n        __defProp(target, key, { get: () => module2[key], enumerable: !(desc = __getOwnPropDesc(module2, key)) || desc.enumerable });\n  }\n  return target;\n};\nvar __toModule = (module2) => {\n  return __reExport(__markAsModule(__defProp(module2 != null ? __create(__getProtoOf(module2)) : {}, \"default\", module2 && module2.__esModule && \"default\" in module2 ? { get: () => module2.default, enumerable: true } : { value: module2, enumerable: true })), module2);\n};\n\n// src/index.ts\n__export(exports, {\n  AbstractDerivation: () => AbstractDerivation,\n  Atom: () => Atom,\n  Box: () => Box,\n  ConstantDerivation: () => ConstantDerivation,\n  DerivationFromSource: () => DerivationFromSource,\n  PointerProxy: () => PointerProxy,\n  Ticker: () => Ticker,\n  getPointerParts: () => getPointerParts,\n  isDerivation: () => isDerivation,\n  isPointer: () => isPointer,\n  iterateAndCountTicks: () => iterateAndCountTicks,\n  iterateOver: () => iterateOver,\n  pointer: () => pointer_default,\n  prism: () => prism_default,\n  val: () => val,\n  valueDerivation: () => valueDerivation\n});\n\n// src/Atom.ts\nvar import_get = __toModule(require(\"lodash-es/get\"));\nvar import_isPlainObject = __toModule(require(\"lodash-es/isPlainObject\"));\nvar import_last = __toModule(require(\"lodash-es/last\"));\n\n// src/utils/Tappable.ts\nvar Tappable = class {\n  constructor(props) {\n    this._untapFromSourceTimeout = null;\n    this._cb = (arg) => {\n      this._tappers.forEach((cb) => {\n        cb(arg);\n      });\n    };\n    this._lastTapperId = 0;\n    this._untapFromSource = null;\n    this._props = props;\n    this._tappers = new Map();\n  }\n  _check() {\n    if (this._untapFromSource) {\n      if (this._tappers.size === 0) {\n        this._scheduleToUntapFromSource();\n      }\n    } else {\n      if (this._tappers.size !== 0) {\n        this._untapFromSource = this._props.tapToSource(this._cb);\n      }\n    }\n  }\n  _scheduleToUntapFromSource() {\n    if (this._untapFromSourceTimeout !== null)\n      return;\n    this._untapFromSourceTimeout = setTimeout(() => {\n      this._untapFromSourceTimeout = null;\n      if (this._tappers.size === 0) {\n        this._untapFromSource();\n        this._untapFromSource = null;\n      }\n    }, 0);\n  }\n  tap(cb) {\n    const tapperId = this._lastTapperId++;\n    this._tappers.set(tapperId, cb);\n    this._check();\n    return () => {\n      this._removeTapperById(tapperId);\n    };\n  }\n  _removeTapperById(id) {\n    this._tappers.delete(id);\n    this._check();\n  }\n};\n\n// src/utils/Emitter.ts\nvar Emitter = class {\n  constructor() {\n    this._lastTapperId = 0;\n    this._tappers = new Map();\n    this.tappable = new Tappable({\n      tapToSource: (cb) => {\n        return this._tap(cb);\n      }\n    });\n  }\n  _tap(cb) {\n    const tapperId = this._lastTapperId++;\n    this._tappers.set(tapperId, cb);\n    this._onNumberOfTappersChangeListener && this._onNumberOfTappersChangeListener(this._tappers.size);\n    return () => {\n      this._removeTapperById(tapperId);\n    };\n  }\n  _removeTapperById(id) {\n    const oldSize = this._tappers.size;\n    this._tappers.delete(id);\n    const newSize = this._tappers.size;\n    if (oldSize !== newSize) {\n      this._onNumberOfTappersChangeListener && this._onNumberOfTappersChangeListener(this._tappers.size);\n    }\n  }\n  emit(payload) {\n    this._tappers.forEach((cb) => {\n      cb(payload);\n    });\n  }\n  hasTappers() {\n    return this._tappers.size !== 0;\n  }\n  onNumberOfTappersChange(cb) {\n    this._onNumberOfTappersChangeListener = cb;\n  }\n};\n\n// src/derivations/DerivationEmitter.ts\nvar DerivationEmitter = class {\n  constructor(derivation, ticker) {\n    this._possiblyMarkAsStale = () => {\n      this._ticker.onThisOrNextTick(this._refresh);\n    };\n    this._refresh = () => {\n      const newValue = this._derivation.getValue();\n      if (newValue === this._lastValue && this._lastValueRecorded === true)\n        return;\n      this._lastValue = newValue;\n      this._lastValueRecorded = true;\n      this._emitter.emit(newValue);\n    };\n    this._derivation = derivation;\n    this._ticker = ticker;\n    this._emitter = new Emitter();\n    this._emitter.onNumberOfTappersChange(() => {\n      this._reactToNumberOfTappersChange();\n    });\n    this._hadTappers = false;\n    this._lastValueRecorded = false;\n    this._lastValue = void 0;\n    return this;\n  }\n  _reactToNumberOfTappersChange() {\n    const hasTappers = this._emitter.hasTappers();\n    if (hasTappers !== this._hadTappers) {\n      this._hadTappers = hasTappers;\n      if (hasTappers) {\n        this._derivation.addDependent(this._possiblyMarkAsStale);\n      } else {\n        this._derivation.removeDependent(this._possiblyMarkAsStale);\n      }\n    }\n  }\n  tappable() {\n    return this._emitter.tappable;\n  }\n};\n\n// src/derivations/DerivationValuelessEmitter.ts\nvar DerivationValuelessEmitter = class {\n  constructor(derivation, dontEmitValues = false) {\n    this.dontEmitValues = dontEmitValues;\n    this._possiblyMarkAsStale = () => {\n      this._emitter.emit(void 0);\n    };\n    this._derivation = derivation;\n    this._emitter = new Emitter();\n    this._emitter.onNumberOfTappersChange(() => {\n      this._reactToNumberOfTappersChange();\n    });\n    this._hadTappers = false;\n    return this;\n  }\n  _reactToNumberOfTappersChange() {\n    const hasTappers = this._emitter.hasTappers();\n    if (hasTappers !== this._hadTappers) {\n      this._hadTappers = hasTappers;\n      if (hasTappers) {\n        this._derivation.addDependent(this._possiblyMarkAsStale);\n      } else {\n        this._derivation.removeDependent(this._possiblyMarkAsStale);\n      }\n    }\n  }\n  tappable() {\n    return this._emitter.tappable;\n  }\n};\n\n// src/derivations/IDerivation.ts\nfunction isDerivation(d) {\n  return d && d.isDerivation && d.isDerivation === true;\n}\n\n// src/derivations/flatMap.ts\nvar UPDATE_NEEDED_FROM;\n(function(UPDATE_NEEDED_FROM2) {\n  UPDATE_NEEDED_FROM2[UPDATE_NEEDED_FROM2[\"none\"] = 0] = \"none\";\n  UPDATE_NEEDED_FROM2[UPDATE_NEEDED_FROM2[\"dep\"] = 1] = \"dep\";\n  UPDATE_NEEDED_FROM2[UPDATE_NEEDED_FROM2[\"inner\"] = 2] = \"inner\";\n})(UPDATE_NEEDED_FROM || (UPDATE_NEEDED_FROM = {}));\nvar makeFlatMapDerivationClass = () => {\n  class FlatMapDerivation extends AbstractDerivation {\n    constructor(_depDerivation, _fn) {\n      super();\n      this._depDerivation = _depDerivation;\n      this._fn = _fn;\n      this._innerDerivation = void 0;\n      this._staleDependency = 1;\n      this._addDependency(_depDerivation);\n      return this;\n    }\n    _recalculateHot() {\n      const updateNeededFrom = this._staleDependency;\n      this._staleDependency = 0;\n      if (updateNeededFrom === 2) {\n        return this._innerDerivation.getValue();\n      }\n      const possibleInnerDerivation = this._fn(this._depDerivation.getValue());\n      if (isDerivation(possibleInnerDerivation)) {\n        this._innerDerivation = possibleInnerDerivation;\n        this._addDependency(possibleInnerDerivation);\n        return possibleInnerDerivation.getValue();\n      } else {\n        return possibleInnerDerivation;\n      }\n    }\n    _recalculateCold() {\n      const possibleInnerDerivation = this._fn(this._depDerivation.getValue());\n      if (isDerivation(possibleInnerDerivation)) {\n        return possibleInnerDerivation.getValue();\n      } else {\n        return possibleInnerDerivation;\n      }\n    }\n    _recalculate() {\n      return this.isHot ? this._recalculateHot() : this._recalculateCold();\n    }\n    _reactToDependencyBecomingStale(msgComingFrom) {\n      const updateNeededFrom = msgComingFrom === this._depDerivation ? 1 : 2;\n      if (updateNeededFrom === 2 && msgComingFrom !== this._innerDerivation) {\n        throw Error(`got a _reactToDependencyBecomingStale() from neither the dep nor the inner derivation`);\n      }\n      if (this._staleDependency === 0) {\n        this._staleDependency = updateNeededFrom;\n        if (updateNeededFrom === 1) {\n          this._removeInnerDerivation();\n        }\n      } else if (this._staleDependency === 1) {\n      } else {\n        if (updateNeededFrom === 1) {\n          this._staleDependency = 1;\n          this._removeInnerDerivation();\n        }\n      }\n    }\n    _removeInnerDerivation() {\n      if (this._innerDerivation) {\n        this._removeDependency(this._innerDerivation);\n        this._innerDerivation = void 0;\n      }\n    }\n    _keepHot() {\n      this._staleDependency = 1;\n      this.getValue();\n    }\n    _becomeCold() {\n      this._staleDependency = 1;\n      this._removeInnerDerivation();\n    }\n  }\n  FlatMapDerivation.displayName = \"flatMap\";\n  return FlatMapDerivation;\n};\nvar cls = void 0;\nfunction flatMap(dep, fn) {\n  if (!cls) {\n    cls = makeFlatMapDerivationClass();\n  }\n  return new cls(dep, fn);\n}\n\n// src/derivations/map.ts\nvar makeMapDerivationClass = () => class MapDerivation extends AbstractDerivation {\n  constructor(_dep, _fn) {\n    super();\n    this._dep = _dep;\n    this._fn = _fn;\n    this._addDependency(_dep);\n  }\n  _recalculate() {\n    return this._fn(this._dep.getValue());\n  }\n  _reactToDependencyBecomingStale() {\n  }\n};\nvar cls2 = void 0;\nfunction flatMap2(dep, fn) {\n  if (!cls2) {\n    cls2 = makeMapDerivationClass();\n  }\n  return new cls2(dep, fn);\n}\n\n// src/utils/Stack.ts\nvar Stack = class {\n  constructor() {\n    this._head = void 0;\n  }\n  peek() {\n    return this._head && this._head.data;\n  }\n  pop() {\n    const head = this._head;\n    if (!head) {\n      return void 0;\n    }\n    this._head = head.next;\n    return head.data;\n  }\n  push(data) {\n    const node = { next: this._head, data };\n    this._head = node;\n  }\n};\n\n// src/derivations/prism/discoveryMechanism.ts\nfunction createMechanism() {\n  const noop2 = () => {\n  };\n  const stack = new Stack();\n  const noopCollector = noop2;\n  const pushCollector2 = (collector) => {\n    stack.push(collector);\n  };\n  const popCollector2 = (collector) => {\n    const existing = stack.peek();\n    if (existing !== collector) {\n      throw new Error(`Popped collector is not on top of the stack`);\n    }\n    stack.pop();\n  };\n  const startIgnoringDependencies2 = () => {\n    stack.push(noopCollector);\n  };\n  const stopIgnoringDependencies2 = () => {\n    if (stack.peek() !== noopCollector) {\n      if (process.env.NODE_ENV === \"development\") {\n        console.warn(\"This should never happen\");\n      }\n    } else {\n      stack.pop();\n    }\n  };\n  const reportResolutionStart2 = (d) => {\n    const possibleCollector = stack.peek();\n    if (possibleCollector) {\n      possibleCollector(d);\n    }\n    stack.push(noopCollector);\n  };\n  const reportResolutionEnd2 = (_d) => {\n    stack.pop();\n  };\n  return {\n    type: \"Dataverse_discoveryMechanism\",\n    startIgnoringDependencies: startIgnoringDependencies2,\n    stopIgnoringDependencies: stopIgnoringDependencies2,\n    reportResolutionStart: reportResolutionStart2,\n    reportResolutionEnd: reportResolutionEnd2,\n    pushCollector: pushCollector2,\n    popCollector: popCollector2\n  };\n}\nfunction getSharedMechanism() {\n  const varName = \"__dataverse_discoveryMechanism_sharedStack\";\n  if (window) {\n    const existingMechanism = window[varName];\n    if (existingMechanism && typeof existingMechanism === \"object\" && existingMechanism.type === \"Dataverse_discoveryMechanism\") {\n      return existingMechanism;\n    } else {\n      const mechanism = createMechanism();\n      window[varName] = mechanism;\n      return mechanism;\n    }\n  } else {\n    return createMechanism();\n  }\n}\nvar {\n  startIgnoringDependencies,\n  stopIgnoringDependencies,\n  reportResolutionEnd,\n  reportResolutionStart,\n  pushCollector,\n  popCollector\n} = getSharedMechanism();\n\n// src/derivations/AbstractDerivation.ts\nvar AbstractDerivation = class {\n  constructor() {\n    this.isDerivation = true;\n    this._didMarkDependentsAsStale = false;\n    this._isHot = false;\n    this._isFresh = false;\n    this._lastValue = void 0;\n    this._dependents = new Set();\n    this._dependencies = new Set();\n    this._internal_markAsStale = (which) => {\n      this._reactToDependencyBecomingStale(which);\n      if (this._didMarkDependentsAsStale)\n        return;\n      this._didMarkDependentsAsStale = true;\n      this._isFresh = false;\n      this._dependents.forEach((dependent) => {\n        dependent(this);\n      });\n    };\n  }\n  get isHot() {\n    return this._isHot;\n  }\n  _addDependency(d) {\n    if (this._dependencies.has(d))\n      return;\n    this._dependencies.add(d);\n    if (this._isHot)\n      d.addDependent(this._internal_markAsStale);\n  }\n  _removeDependency(d) {\n    if (!this._dependencies.has(d))\n      return;\n    this._dependencies.delete(d);\n    if (this._isHot)\n      d.removeDependent(this._internal_markAsStale);\n  }\n  changes(ticker) {\n    return new DerivationEmitter(this, ticker).tappable();\n  }\n  changesWithoutValues() {\n    return new DerivationValuelessEmitter(this).tappable();\n  }\n  keepHot() {\n    return this.changesWithoutValues().tap(() => {\n    });\n  }\n  tapImmediate(ticker, fn) {\n    const untap = this.changes(ticker).tap(fn);\n    fn(this.getValue());\n    return untap;\n  }\n  addDependent(d) {\n    const hadDepsBefore = this._dependents.size > 0;\n    this._dependents.add(d);\n    const hasDepsNow = this._dependents.size > 0;\n    if (hadDepsBefore !== hasDepsNow) {\n      this._reactToNumberOfDependentsChange();\n    }\n  }\n  removeDependent(d) {\n    const hadDepsBefore = this._dependents.size > 0;\n    this._dependents.delete(d);\n    const hasDepsNow = this._dependents.size > 0;\n    if (hadDepsBefore !== hasDepsNow) {\n      this._reactToNumberOfDependentsChange();\n    }\n  }\n  _markAsStale(which) {\n    this._internal_markAsStale(which);\n  }\n  getValue() {\n    reportResolutionStart(this);\n    if (!this._isFresh) {\n      const newValue = this._recalculate();\n      this._lastValue = newValue;\n      if (this._isHot) {\n        this._isFresh = true;\n        this._didMarkDependentsAsStale = false;\n      }\n    }\n    reportResolutionEnd(this);\n    return this._lastValue;\n  }\n  _reactToNumberOfDependentsChange() {\n    const shouldBecomeHot = this._dependents.size > 0;\n    if (shouldBecomeHot === this._isHot)\n      return;\n    this._isHot = shouldBecomeHot;\n    this._didMarkDependentsAsStale = false;\n    this._isFresh = false;\n    if (shouldBecomeHot) {\n      this._dependencies.forEach((d) => {\n        d.addDependent(this._internal_markAsStale);\n      });\n      this._keepHot();\n    } else {\n      this._dependencies.forEach((d) => {\n        d.removeDependent(this._internal_markAsStale);\n      });\n      this._becomeCold();\n    }\n  }\n  _keepHot() {\n  }\n  _becomeCold() {\n  }\n  map(fn) {\n    return flatMap2(this, fn);\n  }\n  flatMap(fn) {\n    return flatMap(this, fn);\n  }\n};\n\n// src/derivations/DerivationFromSource.ts\nvar noop = () => {\n};\nvar DerivationFromSource = class extends AbstractDerivation {\n  constructor(_tapToSource, _getValueFromSource) {\n    super();\n    this._tapToSource = _tapToSource;\n    this._getValueFromSource = _getValueFromSource;\n    this._untapFromChanges = noop;\n    this._cachedValue = void 0;\n    this._hasCachedValue = false;\n  }\n  _recalculate() {\n    if (this.isHot) {\n      if (!this._hasCachedValue) {\n        this._cachedValue = this._getValueFromSource();\n        this._hasCachedValue = true;\n      }\n      return this._cachedValue;\n    } else {\n      return this._getValueFromSource();\n    }\n  }\n  _keepHot() {\n    this._hasCachedValue = false;\n    this._cachedValue = void 0;\n    this._untapFromChanges = this._tapToSource((newValue) => {\n      this._hasCachedValue = true;\n      this._cachedValue = newValue;\n      this._markAsStale(this);\n    });\n  }\n  _becomeCold() {\n    this._untapFromChanges();\n    this._untapFromChanges = noop;\n    this._hasCachedValue = false;\n    this._cachedValue = void 0;\n  }\n  _reactToDependencyBecomingStale() {\n  }\n};\n\n// src/pointer.ts\nvar pointerMetaWeakMap = new WeakMap();\nvar pointerMetaSymbol = Symbol(\"pointerMeta\");\nvar cachedSubPointersWeakMap = new WeakMap();\nvar handler = {\n  get(obj, prop) {\n    if (prop === pointerMetaSymbol)\n      return pointerMetaWeakMap.get(obj);\n    let subs = cachedSubPointersWeakMap.get(obj);\n    if (!subs) {\n      subs = {};\n      cachedSubPointersWeakMap.set(obj, subs);\n    }\n    if (subs[prop])\n      return subs[prop];\n    const meta = pointerMetaWeakMap.get(obj);\n    const subPointer = pointer({ root: meta.root, path: [...meta.path, prop] });\n    subs[prop] = subPointer;\n    return subPointer;\n  }\n};\nvar getPointerMeta = (p) => {\n  const meta = p[pointerMetaSymbol];\n  return meta;\n};\nvar getPointerParts = (p) => {\n  const { root, path } = getPointerMeta(p);\n  return { root, path };\n};\nfunction pointer(args) {\n  var _a;\n  const meta = {\n    root: args.root,\n    path: (_a = args.path) != null ? _a : []\n  };\n  const hiddenObj = {};\n  pointerMetaWeakMap.set(hiddenObj, meta);\n  return new Proxy(hiddenObj, handler);\n}\nvar pointer_default = pointer;\nvar isPointer = (p) => {\n  return p && !!getPointerMeta(p);\n};\n\n// src/utils/updateDeep.ts\nfunction updateDeep(state2, path, reducer) {\n  if (path.length === 0)\n    return reducer(state2);\n  return hoop(state2, path, reducer);\n}\nvar hoop = (s, path, reducer) => {\n  if (path.length === 0) {\n    return reducer(s);\n  }\n  if (Array.isArray(s)) {\n    let [index, ...restOfPath] = path;\n    index = parseInt(String(index), 10);\n    if (isNaN(index))\n      index = 0;\n    const oldVal = s[index];\n    const newVal = hoop(oldVal, restOfPath, reducer);\n    if (oldVal === newVal)\n      return s;\n    const newS = [...s];\n    newS.splice(index, 1, newVal);\n    return newS;\n  } else if (typeof s === \"object\" && s !== null) {\n    const [key, ...restOfPath] = path;\n    const oldVal = s[key];\n    const newVal = hoop(oldVal, restOfPath, reducer);\n    if (oldVal === newVal)\n      return s;\n    const newS = __spreadProps(__spreadValues({}, s), { [key]: newVal });\n    return newS;\n  } else {\n    const [key, ...restOfPath] = path;\n    return { [key]: hoop(void 0, restOfPath, reducer) };\n  }\n};\n\n// src/Atom.ts\nvar ValueTypes;\n(function(ValueTypes2) {\n  ValueTypes2[ValueTypes2[\"Dict\"] = 0] = \"Dict\";\n  ValueTypes2[ValueTypes2[\"Array\"] = 1] = \"Array\";\n  ValueTypes2[ValueTypes2[\"Other\"] = 2] = \"Other\";\n})(ValueTypes || (ValueTypes = {}));\nvar getTypeOfValue = (v) => {\n  if (Array.isArray(v))\n    return 1;\n  if ((0, import_isPlainObject.default)(v))\n    return 0;\n  return 2;\n};\nvar getKeyOfValue = (v, key, vType = getTypeOfValue(v)) => {\n  if (vType === 0 && typeof key === \"string\") {\n    return v[key];\n  } else if (vType === 1 && isValidArrayIndex(key)) {\n    return v[key];\n  } else {\n    return void 0;\n  }\n};\nvar isValidArrayIndex = (key) => {\n  const inNumber = typeof key === \"number\" ? key : parseInt(key, 10);\n  return !isNaN(inNumber) && inNumber >= 0 && inNumber < Infinity && (inNumber | 0) === inNumber;\n};\nvar Scope = class {\n  constructor(_parent, _path) {\n    this._parent = _parent;\n    this._path = _path;\n    this.children = new Map();\n    this.identityChangeListeners = new Set();\n  }\n  addIdentityChangeListener(cb) {\n    this.identityChangeListeners.add(cb);\n  }\n  removeIdentityChangeListener(cb) {\n    this.identityChangeListeners.delete(cb);\n    this._checkForGC();\n  }\n  removeChild(key) {\n    this.children.delete(key);\n    this._checkForGC();\n  }\n  getChild(key) {\n    return this.children.get(key);\n  }\n  getOrCreateChild(key) {\n    let child = this.children.get(key);\n    if (!child) {\n      child = child = new Scope(this, this._path.concat([key]));\n      this.children.set(key, child);\n    }\n    return child;\n  }\n  _checkForGC() {\n    if (this.identityChangeListeners.size > 0)\n      return;\n    if (this.children.size > 0)\n      return;\n    if (this._parent) {\n      this._parent.removeChild((0, import_last.default)(this._path));\n    }\n  }\n};\nvar Atom = class {\n  constructor(initialState) {\n    this.$$isIdentityDerivationProvider = true;\n    this.reduceState = (path, reducer) => {\n      const newState = updateDeep(this.getState(), path, reducer);\n      this.setState(newState);\n      return newState;\n    };\n    this._onPathValueChange = (path, cb) => {\n      const scope2 = this._getOrCreateScopeForPath(path);\n      scope2.identityChangeListeners.add(cb);\n      const untap = () => {\n        scope2.identityChangeListeners.delete(cb);\n      };\n      return untap;\n    };\n    this._currentState = initialState;\n    this._rootScope = new Scope(void 0, []);\n    this.pointer = pointer_default({ root: this, path: [] });\n  }\n  setState(newState) {\n    const oldState = this._currentState;\n    this._currentState = newState;\n    this._checkUpdates(this._rootScope, oldState, newState);\n  }\n  getState() {\n    return this._currentState;\n  }\n  getIn(path) {\n    return path.length === 0 ? this.getState() : (0, import_get.default)(this.getState(), path);\n  }\n  setIn(path, val2) {\n    return this.reduceState(path, () => val2);\n  }\n  _checkUpdates(scope2, oldState, newState) {\n    if (oldState === newState)\n      return;\n    scope2.identityChangeListeners.forEach((cb) => cb(newState));\n    if (scope2.children.size === 0)\n      return;\n    const oldValueType = getTypeOfValue(oldState);\n    const newValueType = getTypeOfValue(newState);\n    if (oldValueType === 2 && oldValueType === newValueType)\n      return;\n    scope2.children.forEach((childScope, childKey) => {\n      const oldChildVal = getKeyOfValue(oldState, childKey, oldValueType);\n      const newChildVal = getKeyOfValue(newState, childKey, newValueType);\n      this._checkUpdates(childScope, oldChildVal, newChildVal);\n    });\n  }\n  _getOrCreateScopeForPath(path) {\n    let curScope = this._rootScope;\n    for (const pathEl of path) {\n      curScope = curScope.getOrCreateChild(pathEl);\n    }\n    return curScope;\n  }\n  getIdentityDerivation(path) {\n    return new DerivationFromSource((listener) => this._onPathValueChange(path, listener), () => this.getIn(path));\n  }\n};\nvar identityDerivationWeakMap = new WeakMap();\nvar valueDerivation = (pointer2) => {\n  const meta = getPointerMeta(pointer2);\n  let derivation = identityDerivationWeakMap.get(meta);\n  if (!derivation) {\n    const root = meta.root;\n    if (!isIdentityChangeProvider(root)) {\n      throw new Error(`Cannot run valueDerivation() on a pointer whose root is not an IdentityChangeProvider`);\n    }\n    const { path } = meta;\n    derivation = root.getIdentityDerivation(path);\n    identityDerivationWeakMap.set(meta, derivation);\n  }\n  return derivation;\n};\nfunction isIdentityChangeProvider(val2) {\n  return typeof val2 === \"object\" && val2 !== null && val2[\"$$isIdentityDerivationProvider\"] === true;\n}\nvar val = (pointerOrDerivationOrPlainValue) => {\n  if (isPointer(pointerOrDerivationOrPlainValue)) {\n    return valueDerivation(pointerOrDerivationOrPlainValue).getValue();\n  } else if (isDerivation(pointerOrDerivationOrPlainValue)) {\n    return pointerOrDerivationOrPlainValue.getValue();\n  } else {\n    return pointerOrDerivationOrPlainValue;\n  }\n};\n\n// src/Box.ts\nvar Box = class {\n  constructor(_value) {\n    this._value = _value;\n    this._emitter = new Emitter();\n    this._publicDerivation = new DerivationFromSource((listener) => this._emitter.tappable.tap(listener), this.get.bind(this));\n  }\n  set(v) {\n    if (v === this._value)\n      return;\n    this._value = v;\n    this._emitter.emit(v);\n  }\n  get() {\n    return this._value;\n  }\n  get derivation() {\n    return this._publicDerivation;\n  }\n};\n\n// src/derivations/ConstantDerivation.ts\nvar ConstantDerivation = class extends AbstractDerivation {\n  constructor(v) {\n    super();\n    this._v = v;\n    return this;\n  }\n  _recalculate() {\n    return this._v;\n  }\n  _reactToDependencyBecomingStale() {\n  }\n};\n\n// src/derivations/iterateAndCountTicks.ts\nfunction* iterateAndCountTicks(pointerOrDerivation) {\n  let d;\n  if (isPointer(pointerOrDerivation)) {\n    d = valueDerivation(pointerOrDerivation);\n  } else if (isDerivation(pointerOrDerivation)) {\n    d = pointerOrDerivation;\n  } else {\n    throw new Error(`Only pointers and derivations are supported`);\n  }\n  let ticksCountedSinceLastYield = 0;\n  const untap = d.changesWithoutValues().tap(() => {\n    ticksCountedSinceLastYield++;\n  });\n  try {\n    while (true) {\n      const ticks = ticksCountedSinceLastYield;\n      ticksCountedSinceLastYield = 0;\n      yield { value: d.getValue(), ticks };\n    }\n  } finally {\n    untap();\n  }\n}\n\n// src/Ticker.ts\nvar Ticker = class {\n  constructor() {\n    this._ticking = false;\n    this._scheduledForThisOrNextTick = new Set();\n    this._scheduledForNextTick = new Set();\n    this._timeAtCurrentTick = 0;\n  }\n  onThisOrNextTick(fn) {\n    this._scheduledForThisOrNextTick.add(fn);\n  }\n  onNextTick(fn) {\n    this._scheduledForNextTick.add(fn);\n  }\n  offThisOrNextTick(fn) {\n    this._scheduledForThisOrNextTick.delete(fn);\n  }\n  offNextTick(fn) {\n    this._scheduledForNextTick.delete(fn);\n  }\n  get time() {\n    if (this._ticking) {\n      return this._timeAtCurrentTick;\n    } else\n      return performance.now();\n  }\n  tick(t = performance.now()) {\n    this._ticking = true;\n    this._timeAtCurrentTick = t;\n    this._scheduledForNextTick.forEach((v) => this._scheduledForThisOrNextTick.add(v));\n    this._scheduledForNextTick.clear();\n    this._tick(0);\n    this._ticking = false;\n  }\n  _tick(iterationNumber) {\n    const time = this.time;\n    if (iterationNumber > 10) {\n      console.warn(\"_tick() recursing for 10 times\");\n    }\n    if (iterationNumber > 100) {\n      throw new Error(`Maximum recursion limit for _tick()`);\n    }\n    const oldSet = this._scheduledForThisOrNextTick;\n    this._scheduledForThisOrNextTick = new Set();\n    oldSet.forEach((fn) => {\n      fn(time);\n    });\n    if (this._scheduledForThisOrNextTick.size > 0) {\n      return this._tick(iterationNumber + 1);\n    }\n  }\n};\n\n// src/derivations/iterateOver.ts\nfunction* iterateOver(pointerOrDerivation) {\n  let d;\n  if (isPointer(pointerOrDerivation)) {\n    d = valueDerivation(pointerOrDerivation);\n  } else if (isDerivation(pointerOrDerivation)) {\n    d = pointerOrDerivation;\n  } else {\n    throw new Error(`Only pointers and derivations are supported`);\n  }\n  const ticker = new Ticker();\n  const untap = d.changes(ticker).tap((v) => {\n  });\n  try {\n    while (true) {\n      ticker.tick();\n      yield d.getValue();\n    }\n  } finally {\n    untap();\n  }\n}\n\n// src/derivations/prism/prism.ts\nvar voidFn = () => {\n};\nvar PrismDerivation = class extends AbstractDerivation {\n  constructor(_fn) {\n    super();\n    this._fn = _fn;\n    this._cacheOfDendencyValues = new Map();\n    this._possiblyStaleDeps = new Set();\n    this._prismScope = new PrismScope();\n  }\n  _recalculate() {\n    let value;\n    if (this._possiblyStaleDeps.size > 0) {\n      let anActuallyStaleDepWasFound = false;\n      startIgnoringDependencies();\n      for (const dep of this._possiblyStaleDeps) {\n        if (this._cacheOfDendencyValues.get(dep) !== dep.getValue()) {\n          anActuallyStaleDepWasFound = true;\n          break;\n        }\n      }\n      stopIgnoringDependencies();\n      this._possiblyStaleDeps.clear();\n      if (!anActuallyStaleDepWasFound) {\n        return this._lastValue;\n      }\n    }\n    const newDeps = new Set();\n    this._cacheOfDendencyValues.clear();\n    const collector = (observedDep) => {\n      newDeps.add(observedDep);\n      this._addDependency(observedDep);\n    };\n    pushCollector(collector);\n    hookScopeStack.push(this._prismScope);\n    try {\n      value = this._fn();\n    } catch (error) {\n      console.error(error);\n    } finally {\n      const topOfTheStack = hookScopeStack.pop();\n      if (topOfTheStack !== this._prismScope) {\n        console.warn(`The Prism hook stack has slipped. This is a bug.`);\n      }\n    }\n    popCollector(collector);\n    this._dependencies.forEach((dep) => {\n      if (!newDeps.has(dep)) {\n        this._removeDependency(dep);\n      }\n    });\n    this._dependencies = newDeps;\n    startIgnoringDependencies();\n    newDeps.forEach((dep) => {\n      this._cacheOfDendencyValues.set(dep, dep.getValue());\n    });\n    stopIgnoringDependencies();\n    return value;\n  }\n  _reactToDependencyBecomingStale(msgComingFrom) {\n    this._possiblyStaleDeps.add(msgComingFrom);\n  }\n  _keepHot() {\n    this._prismScope = new PrismScope();\n    startIgnoringDependencies();\n    this.getValue();\n    stopIgnoringDependencies();\n  }\n  _becomeCold() {\n    cleanupScopeStack(this._prismScope);\n    this._prismScope = new PrismScope();\n  }\n};\nvar PrismScope = class {\n  constructor() {\n    this.isPrismScope = true;\n    this._subs = {};\n  }\n  sub(key) {\n    if (!this._subs[key]) {\n      this._subs[key] = new PrismScope();\n    }\n    return this._subs[key];\n  }\n  get subs() {\n    return this._subs;\n  }\n};\nfunction cleanupScopeStack(scope2) {\n  for (const [_, sub2] of Object.entries(scope2.subs)) {\n    cleanupScopeStack(sub2);\n  }\n  cleanupEffects(scope2);\n}\nfunction cleanupEffects(scope2) {\n  const effects = effectsWeakMap.get(scope2);\n  if (effects) {\n    for (const k of Object.keys(effects)) {\n      const effect2 = effects[k];\n      safelyRun(effect2.cleanup, void 0);\n    }\n  }\n  effectsWeakMap.delete(scope2);\n}\nfunction safelyRun(fn, returnValueInCaseOfError) {\n  let returnValue = returnValueInCaseOfError;\n  let success = false;\n  try {\n    returnValue = fn();\n    success = true;\n  } catch (error) {\n    setTimeout(() => {\n      throw error;\n    });\n  }\n  return { success, returnValue };\n}\nvar hookScopeStack = new Stack();\nvar refsWeakMap = new WeakMap();\nvar effectsWeakMap = new WeakMap();\nvar memosWeakMap = new WeakMap();\nfunction ref(key, initialValue) {\n  const scope2 = hookScopeStack.peek();\n  if (!scope2) {\n    throw new Error(`prism.ref() is called outside of a prism() call.`);\n  }\n  let refs = refsWeakMap.get(scope2);\n  if (!refs) {\n    refs = {};\n    refsWeakMap.set(scope2, refs);\n  }\n  if (refs[key]) {\n    return refs[key];\n  } else {\n    const ref2 = {\n      current: initialValue\n    };\n    refs[key] = ref2;\n    return ref2;\n  }\n}\nfunction effect(key, cb, deps) {\n  const scope2 = hookScopeStack.peek();\n  if (!scope2) {\n    throw new Error(`prism.effect() is called outside of a prism() call.`);\n  }\n  let effects = effectsWeakMap.get(scope2);\n  if (!effects) {\n    effects = {};\n    effectsWeakMap.set(scope2, effects);\n  }\n  if (!effects[key]) {\n    effects[key] = {\n      cleanup: voidFn,\n      deps: [{}]\n    };\n  }\n  const effect2 = effects[key];\n  if (depsHaveChanged(effect2.deps, deps)) {\n    effect2.cleanup();\n    startIgnoringDependencies();\n    effect2.cleanup = safelyRun(cb, voidFn).returnValue;\n    stopIgnoringDependencies();\n    effect2.deps = deps;\n  }\n}\nfunction depsHaveChanged(oldDeps, newDeps) {\n  if (oldDeps === void 0 || newDeps === void 0) {\n    return true;\n  } else if (oldDeps.length !== newDeps.length) {\n    return true;\n  } else {\n    return oldDeps.some((el, i) => el !== newDeps[i]);\n  }\n}\nfunction memo(key, fn, deps) {\n  const scope2 = hookScopeStack.peek();\n  if (!scope2) {\n    throw new Error(`prism.memo() is called outside of a prism() call.`);\n  }\n  let memos = memosWeakMap.get(scope2);\n  if (!memos) {\n    memos = {};\n    memosWeakMap.set(scope2, memos);\n  }\n  if (!memos[key]) {\n    memos[key] = {\n      cachedValue: null,\n      deps: [{}]\n    };\n  }\n  const memo2 = memos[key];\n  if (depsHaveChanged(memo2.deps, deps)) {\n    startIgnoringDependencies();\n    memo2.cachedValue = safelyRun(fn, void 0).returnValue;\n    stopIgnoringDependencies();\n    memo2.deps = deps;\n  }\n  return memo2.cachedValue;\n}\nfunction state(key, initialValue) {\n  const { b, setValue } = prism.memo(\"state/\" + key, () => {\n    const b2 = new Box(initialValue);\n    const setValue2 = (val2) => b2.set(val2);\n    return { b: b2, setValue: setValue2 };\n  }, []);\n  return [b.derivation.getValue(), setValue];\n}\nfunction ensurePrism() {\n  const scope2 = hookScopeStack.peek();\n  if (!scope2) {\n    throw new Error(`The parent function is called outside of a prism() call.`);\n  }\n}\nfunction scope(key, fn) {\n  const parentScope = hookScopeStack.peek();\n  if (!parentScope) {\n    throw new Error(`prism.scope() is called outside of a prism() call.`);\n  }\n  const subScope = parentScope.sub(key);\n  hookScopeStack.push(subScope);\n  const ret = safelyRun(fn, void 0).returnValue;\n  hookScopeStack.pop();\n  return ret;\n}\nfunction sub(key, fn, deps) {\n  return memo(key, () => prism(fn), deps).getValue();\n}\nfunction inPrism() {\n  return !!hookScopeStack.peek();\n}\nvar prism = (fn) => {\n  return new PrismDerivation(fn);\n};\nprism.ref = ref;\nprism.effect = effect;\nprism.memo = memo;\nprism.ensurePrism = ensurePrism;\nprism.state = state;\nprism.scope = scope;\nprism.sub = sub;\nprism.inPrism = inPrism;\nvar prism_default = prism;\n\n// src/PointerProxy.ts\nvar PointerProxy = class {\n  constructor(currentPointer) {\n    this.$$isIdentityDerivationProvider = true;\n    this._currentPointerBox = new Box(currentPointer);\n    this.pointer = pointer_default({ root: this, path: [] });\n  }\n  setPointer(p) {\n    this._currentPointerBox.set(p);\n  }\n  getIdentityDerivation(path) {\n    return this._currentPointerBox.derivation.flatMap((p) => {\n      const subPointer = path.reduce((pointerSoFar, pathItem) => pointerSoFar[pathItem], p);\n      return valueDerivation(subPointer);\n    });\n  }\n};\n//# sourceMappingURL=index.js.map\n","var __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a2, b2) => {\n  for (var prop in b2 || (b2 = {}))\n    if (__hasOwnProp.call(b2, prop))\n      __defNormalProp(a2, prop, b2[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b2)) {\n      if (__propIsEnum.call(b2, prop))\n        __defNormalProp(a2, prop, b2[prop]);\n    }\n  return a2;\n};\nvar __spreadProps = (a2, b2) => __defProps(a2, __getOwnPropDescs(b2));\nvar __markAsModule = (target) => __defProp(target, \"__esModule\", { value: true });\nvar __objRest = (source, exclude) => {\n  var target = {};\n  for (var prop in source)\n    if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0)\n      target[prop] = source[prop];\n  if (source != null && __getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(source)) {\n      if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop))\n        target[prop] = source[prop];\n    }\n  return target;\n};\nvar __commonJS = (cb, mod) => function __require() {\n  return mod || (0, cb[Object.keys(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;\n};\nvar __export = (target, all) => {\n  __markAsModule(target);\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __reExport = (target, module2, desc) => {\n  if (module2 && typeof module2 === \"object\" || typeof module2 === \"function\") {\n    for (let key of __getOwnPropNames(module2))\n      if (!__hasOwnProp.call(target, key) && key !== \"default\")\n        __defProp(target, key, { get: () => module2[key], enumerable: !(desc = __getOwnPropDesc(module2, key)) || desc.enumerable });\n  }\n  return target;\n};\nvar __toModule = (module2) => {\n  return __reExport(__markAsModule(__defProp(module2 != null ? __create(__getProtoOf(module2)) : {}, \"default\", module2 && module2.__esModule && \"default\" in module2 ? { get: () => module2.default, enumerable: true } : { value: module2, enumerable: true })), module2);\n};\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\n\n// ../node_modules/timing-function/lib/UnitBezier.js\nvar require_UnitBezier = __commonJS({\n  \"../node_modules/timing-function/lib/UnitBezier.js\"(exports, module2) {\n    var UnitBezier2;\n    module2.exports = UnitBezier2 = function() {\n      function UnitBezier3(p1x, p1y, p2x, p2y) {\n        this.set(p1x, p1y, p2x, p2y);\n      }\n      UnitBezier3.prototype.set = function(p1x, p1y, p2x, p2y) {\n        this._cx = 3 * p1x;\n        this._bx = 3 * (p2x - p1x) - this._cx;\n        this._ax = 1 - this._cx - this._bx;\n        this._cy = 3 * p1y;\n        this._by = 3 * (p2y - p1y) - this._cy;\n        this._ay = 1 - this._cy - this._by;\n      };\n      UnitBezier3.epsilon = 1e-6;\n      UnitBezier3.prototype._sampleCurveX = function(t3) {\n        return ((this._ax * t3 + this._bx) * t3 + this._cx) * t3;\n      };\n      UnitBezier3.prototype._sampleCurveY = function(t3) {\n        return ((this._ay * t3 + this._by) * t3 + this._cy) * t3;\n      };\n      UnitBezier3.prototype._sampleCurveDerivativeX = function(t3) {\n        return (3 * this._ax * t3 + 2 * this._bx) * t3 + this._cx;\n      };\n      UnitBezier3.prototype._solveCurveX = function(x2, epsilon) {\n        var d2, i2, t0, t1, t22, x22;\n        t0 = void 0;\n        t1 = void 0;\n        t22 = void 0;\n        x22 = void 0;\n        d2 = void 0;\n        i2 = void 0;\n        t22 = x2;\n        i2 = 0;\n        while (i2 < 8) {\n          x22 = this._sampleCurveX(t22) - x2;\n          if (Math.abs(x22) < epsilon) {\n            return t22;\n          }\n          d2 = this._sampleCurveDerivativeX(t22);\n          if (Math.abs(d2) < epsilon) {\n            break;\n          }\n          t22 = t22 - x22 / d2;\n          i2++;\n        }\n        t0 = 0;\n        t1 = 1;\n        t22 = x2;\n        if (t22 < t0) {\n          return t0;\n        }\n        if (t22 > t1) {\n          return t1;\n        }\n        while (t0 < t1) {\n          x22 = this._sampleCurveX(t22);\n          if (Math.abs(x22 - x2) < epsilon) {\n            return t22;\n          }\n          if (x2 > x22) {\n            t0 = t22;\n          } else {\n            t1 = t22;\n          }\n          t22 = (t1 - t0) * 0.5 + t0;\n        }\n        return t22;\n      };\n      UnitBezier3.prototype.solve = function(x2, epsilon) {\n        return this._sampleCurveY(this._solveCurveX(x2, epsilon));\n      };\n      UnitBezier3.prototype.solveSimple = function(x2) {\n        return this._sampleCurveY(this._solveCurveX(x2, 1e-6));\n      };\n      return UnitBezier3;\n    }();\n  }\n});\n\n// ../node_modules/levenshtein-edit-distance/index.js\nvar require_levenshtein_edit_distance = __commonJS({\n  \"../node_modules/levenshtein-edit-distance/index.js\"(exports, module2) {\n    var cache;\n    var codes;\n    cache = [];\n    codes = [];\n    function levenshtein(value, other, insensitive) {\n      var length, lengthOther, code, result, distance, distanceOther, index, indexOther;\n      if (value === other) {\n        return 0;\n      }\n      length = value.length;\n      lengthOther = other.length;\n      if (length === 0) {\n        return lengthOther;\n      }\n      if (lengthOther === 0) {\n        return length;\n      }\n      if (insensitive) {\n        value = value.toLowerCase();\n        other = other.toLowerCase();\n      }\n      index = 0;\n      while (index < length) {\n        codes[index] = value.charCodeAt(index);\n        cache[index] = ++index;\n      }\n      indexOther = 0;\n      while (indexOther < lengthOther) {\n        code = other.charCodeAt(indexOther);\n        result = distance = indexOther++;\n        index = -1;\n        while (++index < length) {\n          distanceOther = code === codes[index] ? distance : distance + 1;\n          distance = cache[index];\n          cache[index] = result = distance > result ? distanceOther > result ? result + 1 : distanceOther : distanceOther > distance ? distance + 1 : distanceOther;\n        }\n      }\n      return result;\n    }\n    module2.exports = levenshtein;\n  }\n});\n\n// ../node_modules/propose/propose.js\nvar require_propose = __commonJS({\n  \"../node_modules/propose/propose.js\"(exports, module2) {\n    var levenshtein = require_levenshtein_edit_distance();\n    function propose2() {\n      var ratio;\n      var distance;\n      var proposed;\n      var threshold;\n      var ignoreCase;\n      var max_ratio = 0;\n      var word = arguments[0];\n      var dictionary = arguments[1];\n      var len = dictionary.length;\n      var options = arguments[2];\n      if (options) {\n        threshold = options.threshold;\n        ignoreCase = options.ignoreCase;\n      }\n      if (threshold === void 0)\n        threshold = 0;\n      for (var i2 = 0; i2 < len; ++i2) {\n        if (ignoreCase)\n          distance = levenshtein(word, dictionary[i2], true);\n        else\n          distance = levenshtein(word, dictionary[i2]);\n        if (distance > word.length)\n          ratio = 1 - distance / dictionary[i2].length;\n        else\n          ratio = 1 - distance / word.length;\n        if (ratio > max_ratio) {\n          max_ratio = ratio;\n          proposed = dictionary[i2];\n        }\n      }\n      if (max_ratio >= threshold)\n        return proposed;\n      return null;\n    }\n    module2.exports = propose2;\n  }\n});\n\n// ../node_modules/fast-deep-equal/index.js\nvar require_fast_deep_equal = __commonJS({\n  \"../node_modules/fast-deep-equal/index.js\"(exports, module2) {\n    \"use strict\";\n    module2.exports = function equal(a2, b2) {\n      if (a2 === b2)\n        return true;\n      if (a2 && b2 && typeof a2 == \"object\" && typeof b2 == \"object\") {\n        if (a2.constructor !== b2.constructor)\n          return false;\n        var length, i2, keys;\n        if (Array.isArray(a2)) {\n          length = a2.length;\n          if (length != b2.length)\n            return false;\n          for (i2 = length; i2-- !== 0; )\n            if (!equal(a2[i2], b2[i2]))\n              return false;\n          return true;\n        }\n        if (a2.constructor === RegExp)\n          return a2.source === b2.source && a2.flags === b2.flags;\n        if (a2.valueOf !== Object.prototype.valueOf)\n          return a2.valueOf() === b2.valueOf();\n        if (a2.toString !== Object.prototype.toString)\n          return a2.toString() === b2.toString();\n        keys = Object.keys(a2);\n        length = keys.length;\n        if (length !== Object.keys(b2).length)\n          return false;\n        for (i2 = length; i2-- !== 0; )\n          if (!Object.prototype.hasOwnProperty.call(b2, keys[i2]))\n            return false;\n        for (i2 = length; i2-- !== 0; ) {\n          var key = keys[i2];\n          if (!equal(a2[key], b2[key]))\n            return false;\n        }\n        return true;\n      }\n      return a2 !== a2 && b2 !== b2;\n    };\n  }\n});\n\n// core/src/index.ts\n__export(exports, {\n  getProject: () => getProject,\n  onChange: () => onChange,\n  types: () => propTypes_exports\n});\n\n// core/src/coreExports.ts\nvar coreExports_exports = {};\n__export(coreExports_exports, {\n  getProject: () => getProject,\n  onChange: () => onChange,\n  types: () => propTypes_exports\n});\n\n// core/src/projects/projectsSingleton.ts\nvar import_dataverse = __toModule(require(\"@theatre/dataverse\"));\nvar ProjectsSingleton = class {\n  constructor() {\n    __publicField(this, \"atom\", new import_dataverse.Atom({ projects: {} }));\n  }\n  add(id, project) {\n    this.atom.reduceState([\"projects\", id], () => project);\n  }\n  get(id) {\n    return this.atom.getState().projects[id];\n  }\n  has(id) {\n    return !!this.get(id);\n  }\n};\nvar singleton = new ProjectsSingleton();\nvar projectsSingleton_default = singleton;\n\n// core/src/privateAPIs.ts\nvar publicAPIToPrivateAPIMap = new WeakMap();\nfunction privateAPI(pub) {\n  return publicAPIToPrivateAPIMap.get(pub);\n}\nfunction setPrivateAPI(pub, priv) {\n  publicAPIToPrivateAPIMap.set(pub, priv);\n}\n\n// shared/src/utils/index.ts\nvar emptyArray = [];\n\n// ../node_modules/lodash-es/isArray.js\nvar isArray = Array.isArray;\nvar isArray_default = isArray;\n\n// ../node_modules/lodash-es/_freeGlobal.js\nvar freeGlobal = typeof window == \"object\" && window && window.Object === Object && window;\nvar freeGlobal_default = freeGlobal;\n\n// ../node_modules/lodash-es/_root.js\nvar freeSelf = typeof self == \"object\" && self && self.Object === Object && self;\nvar root = freeGlobal_default || freeSelf || Function(\"return this\")();\nvar root_default = root;\n\n// ../node_modules/lodash-es/_Symbol.js\nvar Symbol2 = root_default.Symbol;\nvar Symbol_default = Symbol2;\n\n// ../node_modules/lodash-es/_getRawTag.js\nvar objectProto = Object.prototype;\nvar hasOwnProperty = objectProto.hasOwnProperty;\nvar nativeObjectToString = objectProto.toString;\nvar symToStringTag = Symbol_default ? Symbol_default.toStringTag : void 0;\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag), tag = value[symToStringTag];\n  try {\n    value[symToStringTag] = void 0;\n    var unmasked = true;\n  } catch (e2) {\n  }\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\nvar getRawTag_default = getRawTag;\n\n// ../node_modules/lodash-es/_objectToString.js\nvar objectProto2 = Object.prototype;\nvar nativeObjectToString2 = objectProto2.toString;\nfunction objectToString(value) {\n  return nativeObjectToString2.call(value);\n}\nvar objectToString_default = objectToString;\n\n// ../node_modules/lodash-es/_baseGetTag.js\nvar nullTag = \"[object Null]\";\nvar undefinedTag = \"[object Undefined]\";\nvar symToStringTag2 = Symbol_default ? Symbol_default.toStringTag : void 0;\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === void 0 ? undefinedTag : nullTag;\n  }\n  return symToStringTag2 && symToStringTag2 in Object(value) ? getRawTag_default(value) : objectToString_default(value);\n}\nvar baseGetTag_default = baseGetTag;\n\n// ../node_modules/lodash-es/isObjectLike.js\nfunction isObjectLike(value) {\n  return value != null && typeof value == \"object\";\n}\nvar isObjectLike_default = isObjectLike;\n\n// ../node_modules/lodash-es/isSymbol.js\nvar symbolTag = \"[object Symbol]\";\nfunction isSymbol(value) {\n  return typeof value == \"symbol\" || isObjectLike_default(value) && baseGetTag_default(value) == symbolTag;\n}\nvar isSymbol_default = isSymbol;\n\n// ../node_modules/lodash-es/_isKey.js\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/;\nvar reIsPlainProp = /^\\w*$/;\nfunction isKey(value, object) {\n  if (isArray_default(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == \"number\" || type == \"symbol\" || type == \"boolean\" || value == null || isSymbol_default(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) || object != null && value in Object(object);\n}\nvar isKey_default = isKey;\n\n// ../node_modules/lodash-es/isObject.js\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == \"object\" || type == \"function\");\n}\nvar isObject_default = isObject;\n\n// ../node_modules/lodash-es/isFunction.js\nvar asyncTag = \"[object AsyncFunction]\";\nvar funcTag = \"[object Function]\";\nvar genTag = \"[object GeneratorFunction]\";\nvar proxyTag = \"[object Proxy]\";\nfunction isFunction(value) {\n  if (!isObject_default(value)) {\n    return false;\n  }\n  var tag = baseGetTag_default(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\nvar isFunction_default = isFunction;\n\n// ../node_modules/lodash-es/_coreJsData.js\nvar coreJsData = root_default[\"__core-js_shared__\"];\nvar coreJsData_default = coreJsData;\n\n// ../node_modules/lodash-es/_isMasked.js\nvar maskSrcKey = function() {\n  var uid = /[^.]+$/.exec(coreJsData_default && coreJsData_default.keys && coreJsData_default.keys.IE_PROTO || \"\");\n  return uid ? \"Symbol(src)_1.\" + uid : \"\";\n}();\nfunction isMasked(func) {\n  return !!maskSrcKey && maskSrcKey in func;\n}\nvar isMasked_default = isMasked;\n\n// ../node_modules/lodash-es/_toSource.js\nvar funcProto = Function.prototype;\nvar funcToString = funcProto.toString;\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e2) {\n    }\n    try {\n      return func + \"\";\n    } catch (e2) {\n    }\n  }\n  return \"\";\n}\nvar toSource_default = toSource;\n\n// ../node_modules/lodash-es/_baseIsNative.js\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\nvar funcProto2 = Function.prototype;\nvar objectProto3 = Object.prototype;\nvar funcToString2 = funcProto2.toString;\nvar hasOwnProperty2 = objectProto3.hasOwnProperty;\nvar reIsNative = RegExp(\"^\" + funcToString2.call(hasOwnProperty2).replace(reRegExpChar, \"\\\\$&\").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, \"$1.*?\") + \"$\");\nfunction baseIsNative(value) {\n  if (!isObject_default(value) || isMasked_default(value)) {\n    return false;\n  }\n  var pattern = isFunction_default(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource_default(value));\n}\nvar baseIsNative_default = baseIsNative;\n\n// ../node_modules/lodash-es/_getValue.js\nfunction getValue(object, key) {\n  return object == null ? void 0 : object[key];\n}\nvar getValue_default = getValue;\n\n// ../node_modules/lodash-es/_getNative.js\nfunction getNative(object, key) {\n  var value = getValue_default(object, key);\n  return baseIsNative_default(value) ? value : void 0;\n}\nvar getNative_default = getNative;\n\n// ../node_modules/lodash-es/_nativeCreate.js\nvar nativeCreate = getNative_default(Object, \"create\");\nvar nativeCreate_default = nativeCreate;\n\n// ../node_modules/lodash-es/_hashClear.js\nfunction hashClear() {\n  this.__data__ = nativeCreate_default ? nativeCreate_default(null) : {};\n  this.size = 0;\n}\nvar hashClear_default = hashClear;\n\n// ../node_modules/lodash-es/_hashDelete.js\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\nvar hashDelete_default = hashDelete;\n\n// ../node_modules/lodash-es/_hashGet.js\nvar HASH_UNDEFINED = \"__lodash_hash_undefined__\";\nvar objectProto4 = Object.prototype;\nvar hasOwnProperty3 = objectProto4.hasOwnProperty;\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate_default) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? void 0 : result;\n  }\n  return hasOwnProperty3.call(data, key) ? data[key] : void 0;\n}\nvar hashGet_default = hashGet;\n\n// ../node_modules/lodash-es/_hashHas.js\nvar objectProto5 = Object.prototype;\nvar hasOwnProperty4 = objectProto5.hasOwnProperty;\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate_default ? data[key] !== void 0 : hasOwnProperty4.call(data, key);\n}\nvar hashHas_default = hashHas;\n\n// ../node_modules/lodash-es/_hashSet.js\nvar HASH_UNDEFINED2 = \"__lodash_hash_undefined__\";\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = nativeCreate_default && value === void 0 ? HASH_UNDEFINED2 : value;\n  return this;\n}\nvar hashSet_default = hashSet;\n\n// ../node_modules/lodash-es/_Hash.js\nfunction Hash(entries) {\n  var index = -1, length = entries == null ? 0 : entries.length;\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\nHash.prototype.clear = hashClear_default;\nHash.prototype[\"delete\"] = hashDelete_default;\nHash.prototype.get = hashGet_default;\nHash.prototype.has = hashHas_default;\nHash.prototype.set = hashSet_default;\nvar Hash_default = Hash;\n\n// ../node_modules/lodash-es/_listCacheClear.js\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\nvar listCacheClear_default = listCacheClear;\n\n// ../node_modules/lodash-es/eq.js\nfunction eq(value, other) {\n  return value === other || value !== value && other !== other;\n}\nvar eq_default = eq;\n\n// ../node_modules/lodash-es/_assocIndexOf.js\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq_default(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\nvar assocIndexOf_default = assocIndexOf;\n\n// ../node_modules/lodash-es/_listCacheDelete.js\nvar arrayProto = Array.prototype;\nvar splice = arrayProto.splice;\nfunction listCacheDelete(key) {\n  var data = this.__data__, index = assocIndexOf_default(data, key);\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\nvar listCacheDelete_default = listCacheDelete;\n\n// ../node_modules/lodash-es/_listCacheGet.js\nfunction listCacheGet(key) {\n  var data = this.__data__, index = assocIndexOf_default(data, key);\n  return index < 0 ? void 0 : data[index][1];\n}\nvar listCacheGet_default = listCacheGet;\n\n// ../node_modules/lodash-es/_listCacheHas.js\nfunction listCacheHas(key) {\n  return assocIndexOf_default(this.__data__, key) > -1;\n}\nvar listCacheHas_default = listCacheHas;\n\n// ../node_modules/lodash-es/_listCacheSet.js\nfunction listCacheSet(key, value) {\n  var data = this.__data__, index = assocIndexOf_default(data, key);\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\nvar listCacheSet_default = listCacheSet;\n\n// ../node_modules/lodash-es/_ListCache.js\nfunction ListCache(entries) {\n  var index = -1, length = entries == null ? 0 : entries.length;\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\nListCache.prototype.clear = listCacheClear_default;\nListCache.prototype[\"delete\"] = listCacheDelete_default;\nListCache.prototype.get = listCacheGet_default;\nListCache.prototype.has = listCacheHas_default;\nListCache.prototype.set = listCacheSet_default;\nvar ListCache_default = ListCache;\n\n// ../node_modules/lodash-es/_Map.js\nvar Map2 = getNative_default(root_default, \"Map\");\nvar Map_default = Map2;\n\n// ../node_modules/lodash-es/_mapCacheClear.js\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    \"hash\": new Hash_default(),\n    \"map\": new (Map_default || ListCache_default)(),\n    \"string\": new Hash_default()\n  };\n}\nvar mapCacheClear_default = mapCacheClear;\n\n// ../node_modules/lodash-es/_isKeyable.js\nfunction isKeyable(value) {\n  var type = typeof value;\n  return type == \"string\" || type == \"number\" || type == \"symbol\" || type == \"boolean\" ? value !== \"__proto__\" : value === null;\n}\nvar isKeyable_default = isKeyable;\n\n// ../node_modules/lodash-es/_getMapData.js\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable_default(key) ? data[typeof key == \"string\" ? \"string\" : \"hash\"] : data.map;\n}\nvar getMapData_default = getMapData;\n\n// ../node_modules/lodash-es/_mapCacheDelete.js\nfunction mapCacheDelete(key) {\n  var result = getMapData_default(this, key)[\"delete\"](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\nvar mapCacheDelete_default = mapCacheDelete;\n\n// ../node_modules/lodash-es/_mapCacheGet.js\nfunction mapCacheGet(key) {\n  return getMapData_default(this, key).get(key);\n}\nvar mapCacheGet_default = mapCacheGet;\n\n// ../node_modules/lodash-es/_mapCacheHas.js\nfunction mapCacheHas(key) {\n  return getMapData_default(this, key).has(key);\n}\nvar mapCacheHas_default = mapCacheHas;\n\n// ../node_modules/lodash-es/_mapCacheSet.js\nfunction mapCacheSet(key, value) {\n  var data = getMapData_default(this, key), size = data.size;\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\nvar mapCacheSet_default = mapCacheSet;\n\n// ../node_modules/lodash-es/_MapCache.js\nfunction MapCache(entries) {\n  var index = -1, length = entries == null ? 0 : entries.length;\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\nMapCache.prototype.clear = mapCacheClear_default;\nMapCache.prototype[\"delete\"] = mapCacheDelete_default;\nMapCache.prototype.get = mapCacheGet_default;\nMapCache.prototype.has = mapCacheHas_default;\nMapCache.prototype.set = mapCacheSet_default;\nvar MapCache_default = MapCache;\n\n// ../node_modules/lodash-es/memoize.js\nvar FUNC_ERROR_TEXT = \"Expected a function\";\nfunction memoize(func, resolver) {\n  if (typeof func != \"function\" || resolver != null && typeof resolver != \"function\") {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments, key = resolver ? resolver.apply(this, args) : args[0], cache = memoized.cache;\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result) || cache;\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache_default)();\n  return memoized;\n}\nmemoize.Cache = MapCache_default;\nvar memoize_default = memoize;\n\n// ../node_modules/lodash-es/_memoizeCapped.js\nvar MAX_MEMOIZE_SIZE = 500;\nfunction memoizeCapped(func) {\n  var result = memoize_default(func, function(key) {\n    if (cache.size === MAX_MEMOIZE_SIZE) {\n      cache.clear();\n    }\n    return key;\n  });\n  var cache = result.cache;\n  return result;\n}\nvar memoizeCapped_default = memoizeCapped;\n\n// ../node_modules/lodash-es/_stringToPath.js\nvar rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\nvar reEscapeChar = /\\\\(\\\\)?/g;\nvar stringToPath = memoizeCapped_default(function(string2) {\n  var result = [];\n  if (string2.charCodeAt(0) === 46) {\n    result.push(\"\");\n  }\n  string2.replace(rePropName, function(match, number2, quote, subString) {\n    result.push(quote ? subString.replace(reEscapeChar, \"$1\") : number2 || match);\n  });\n  return result;\n});\nvar stringToPath_default = stringToPath;\n\n// ../node_modules/lodash-es/_arrayMap.js\nfunction arrayMap(array, iteratee) {\n  var index = -1, length = array == null ? 0 : array.length, result = Array(length);\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\nvar arrayMap_default = arrayMap;\n\n// ../node_modules/lodash-es/_baseToString.js\nvar INFINITY = 1 / 0;\nvar symbolProto = Symbol_default ? Symbol_default.prototype : void 0;\nvar symbolToString = symbolProto ? symbolProto.toString : void 0;\nfunction baseToString(value) {\n  if (typeof value == \"string\") {\n    return value;\n  }\n  if (isArray_default(value)) {\n    return arrayMap_default(value, baseToString) + \"\";\n  }\n  if (isSymbol_default(value)) {\n    return symbolToString ? symbolToString.call(value) : \"\";\n  }\n  var result = value + \"\";\n  return result == \"0\" && 1 / value == -INFINITY ? \"-0\" : result;\n}\nvar baseToString_default = baseToString;\n\n// ../node_modules/lodash-es/toString.js\nfunction toString(value) {\n  return value == null ? \"\" : baseToString_default(value);\n}\nvar toString_default = toString;\n\n// ../node_modules/lodash-es/_castPath.js\nfunction castPath(value, object) {\n  if (isArray_default(value)) {\n    return value;\n  }\n  return isKey_default(value, object) ? [value] : stringToPath_default(toString_default(value));\n}\nvar castPath_default = castPath;\n\n// ../node_modules/lodash-es/_toKey.js\nvar INFINITY2 = 1 / 0;\nfunction toKey(value) {\n  if (typeof value == \"string\" || isSymbol_default(value)) {\n    return value;\n  }\n  var result = value + \"\";\n  return result == \"0\" && 1 / value == -INFINITY2 ? \"-0\" : result;\n}\nvar toKey_default = toKey;\n\n// ../node_modules/lodash-es/_baseGet.js\nfunction baseGet(object, path) {\n  path = castPath_default(path, object);\n  var index = 0, length = path.length;\n  while (object != null && index < length) {\n    object = object[toKey_default(path[index++])];\n  }\n  return index && index == length ? object : void 0;\n}\nvar baseGet_default = baseGet;\n\n// ../node_modules/lodash-es/get.js\nfunction get(object, path, defaultValue) {\n  var result = object == null ? void 0 : baseGet_default(object, path);\n  return result === void 0 ? defaultValue : result;\n}\nvar get_default = get;\n\n// shared/src/utils/getDeep.ts\nfunction getDeep(v2, path) {\n  if (path.length === 0)\n    return v2;\n  return get_default(v2, path);\n}\n\n// shared/src/utils/SimpleCache.ts\nvar SimpleCache = class {\n  constructor() {\n    __publicField(this, \"_values\", {});\n  }\n  get(key, producer) {\n    if (this.has(key)) {\n      return this._values[key];\n    } else {\n      const cachedValue = producer();\n      this._values[key] = cachedValue;\n      return cachedValue;\n    }\n  }\n  has(key) {\n    return this._values.hasOwnProperty(key);\n  }\n};\n\n// core/src/sheetObjects/SheetObjectTemplate.ts\nvar import_dataverse7 = __toModule(require(\"@theatre/dataverse\"));\n\n// ../node_modules/lodash-es/_defineProperty.js\nvar defineProperty = function() {\n  try {\n    var func = getNative_default(Object, \"defineProperty\");\n    func({}, \"\", {});\n    return func;\n  } catch (e2) {\n  }\n}();\nvar defineProperty_default = defineProperty;\n\n// ../node_modules/lodash-es/_baseAssignValue.js\nfunction baseAssignValue(object, key, value) {\n  if (key == \"__proto__\" && defineProperty_default) {\n    defineProperty_default(object, key, {\n      \"configurable\": true,\n      \"enumerable\": true,\n      \"value\": value,\n      \"writable\": true\n    });\n  } else {\n    object[key] = value;\n  }\n}\nvar baseAssignValue_default = baseAssignValue;\n\n// ../node_modules/lodash-es/_assignValue.js\nvar objectProto6 = Object.prototype;\nvar hasOwnProperty5 = objectProto6.hasOwnProperty;\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty5.call(object, key) && eq_default(objValue, value)) || value === void 0 && !(key in object)) {\n    baseAssignValue_default(object, key, value);\n  }\n}\nvar assignValue_default = assignValue;\n\n// ../node_modules/lodash-es/_isIndex.js\nvar MAX_SAFE_INTEGER = 9007199254740991;\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length && (type == \"number\" || type != \"symbol\" && reIsUint.test(value)) && (value > -1 && value % 1 == 0 && value < length);\n}\nvar isIndex_default = isIndex;\n\n// ../node_modules/lodash-es/_baseSet.js\nfunction baseSet(object, path, value, customizer) {\n  if (!isObject_default(object)) {\n    return object;\n  }\n  path = castPath_default(path, object);\n  var index = -1, length = path.length, lastIndex = length - 1, nested = object;\n  while (nested != null && ++index < length) {\n    var key = toKey_default(path[index]), newValue = value;\n    if (key === \"__proto__\" || key === \"constructor\" || key === \"prototype\") {\n      return object;\n    }\n    if (index != lastIndex) {\n      var objValue = nested[key];\n      newValue = customizer ? customizer(objValue, key, nested) : void 0;\n      if (newValue === void 0) {\n        newValue = isObject_default(objValue) ? objValue : isIndex_default(path[index + 1]) ? [] : {};\n      }\n    }\n    assignValue_default(nested, key, newValue);\n    nested = nested[key];\n  }\n  return object;\n}\nvar baseSet_default = baseSet;\n\n// ../node_modules/lodash-es/set.js\nfunction set(object, path, value) {\n  return object == null ? object : baseSet_default(object, path, value);\n}\nvar set_default = set;\n\n// core/src/sheetObjects/getPropDefaultsOfSheetObject.ts\nvar cachedDefaults = new WeakMap();\nfunction getPropDefaultsOfSheetObject(config) {\n  return getDefaultsOfPropTypeConfig(config);\n}\nfunction getDefaultsOfPropTypeConfig(config) {\n  if (cachedDefaults.has(config)) {\n    return cachedDefaults.get(config);\n  }\n  const generated = config.type === \"compound\" ? generateDefaultsForCompound(config) : config.type === \"enum\" ? generateDefaultsForEnum(config) : config.default;\n  cachedDefaults.set(config, generated);\n  return generated;\n}\nfunction generateDefaultsForEnum(config) {\n  const defaults = {\n    $case: config.defaultCase\n  };\n  for (const [case_, caseConf] of Object.entries(config.cases)) {\n    defaults[case_] = getDefaultsOfPropTypeConfig(caseConf);\n  }\n  return defaults;\n}\nfunction generateDefaultsForCompound(config) {\n  const defaults = {};\n  for (const [key, propConf] of Object.entries(config.props)) {\n    defaults[key] = getDefaultsOfPropTypeConfig(propConf);\n  }\n  return defaults;\n}\n\n// core/src/sequences/trackValueAtTime.ts\nvar import_dataverse2 = __toModule(require(\"@theatre/dataverse\"));\n\n// shared/src/logger.ts\nvar logger = {\n  log: console.log,\n  warn: console.warn,\n  error: console.error,\n  trace: console.trace\n};\nvar logger_default = logger;\n\n// core/src/sequences/trackValueAtTime.ts\nvar import_UnitBezier = __toModule(require_UnitBezier());\nfunction trackValueAtTime(trackP, timeD) {\n  return (0, import_dataverse2.prism)(() => {\n    const track = (0, import_dataverse2.val)(trackP);\n    const driverD = import_dataverse2.prism.memo(\"driver\", () => {\n      if (!track) {\n        return new import_dataverse2.ConstantDerivation(void 0);\n      } else if (track.type === \"BasicKeyframedTrack\") {\n        return trackValueAtTime_basicKeyframedTrack(track, timeD);\n      } else {\n        logger_default.error(`Track type not yet supported.`);\n        return new import_dataverse2.ConstantDerivation(void 0);\n      }\n    }, [track]);\n    return driverD.getValue();\n  });\n}\nfunction trackValueAtTime_basicKeyframedTrack(track, timeD) {\n  return (0, import_dataverse2.prism)(() => {\n    let stateRef = import_dataverse2.prism.ref(\"state\", { started: false });\n    let state = stateRef.current;\n    const time = timeD.getValue();\n    if (!state.started || time < state.validFrom || state.validTo <= time) {\n      stateRef.current = state = pp(timeD, track);\n    }\n    return state.der.getValue();\n  });\n}\nvar undefinedConstD = new import_dataverse2.ConstantDerivation(void 0);\nvar pp = (progressionD, track) => {\n  const progression = progressionD.getValue();\n  if (track.keyframes.length === 0) {\n    return {\n      started: true,\n      validFrom: -Infinity,\n      validTo: Infinity,\n      der: undefinedConstD\n    };\n  }\n  let currentKeyframeIndex = 0;\n  while (true) {\n    const currentKeyframe = track.keyframes[currentKeyframeIndex];\n    if (!currentKeyframe) {\n      if (process.env.NODE_ENV !== \"production\") {\n        logger_default.error(`Bug here`);\n      }\n      return states.error;\n    }\n    const isLastKeyframe = currentKeyframeIndex === track.keyframes.length - 1;\n    if (progression < currentKeyframe.position) {\n      if (currentKeyframeIndex === 0) {\n        return states.beforeFirstKeyframe(currentKeyframe);\n      } else {\n        if (process.env.NODE_ENV !== \"production\") {\n          logger_default.error(`Bug here`);\n        }\n        return states.error;\n      }\n    } else if (currentKeyframe.position === progression) {\n      if (isLastKeyframe) {\n        return states.lastKeyframe(currentKeyframe);\n      } else {\n        return states.between(currentKeyframe, track.keyframes[currentKeyframeIndex + 1], progressionD);\n      }\n    } else {\n      if (currentKeyframeIndex === track.keyframes.length - 1) {\n        return states.lastKeyframe(currentKeyframe);\n      } else {\n        const nextKeyframeIndex = currentKeyframeIndex + 1;\n        if (track.keyframes[nextKeyframeIndex].position <= progression) {\n          currentKeyframeIndex = nextKeyframeIndex;\n          continue;\n        } else {\n          return states.between(currentKeyframe, track.keyframes[currentKeyframeIndex + 1], progressionD);\n        }\n      }\n    }\n  }\n};\nvar states = {\n  beforeFirstKeyframe(kf) {\n    return {\n      started: true,\n      validFrom: -Infinity,\n      validTo: kf.position,\n      der: new import_dataverse2.ConstantDerivation(kf.value)\n    };\n  },\n  lastKeyframe(kf) {\n    return {\n      started: true,\n      validFrom: kf.position,\n      validTo: Infinity,\n      der: new import_dataverse2.ConstantDerivation(kf.value)\n    };\n  },\n  between(left, right, progressionD) {\n    if (!left.connectedRight) {\n      return {\n        started: true,\n        validFrom: left.position,\n        validTo: right.position,\n        der: new import_dataverse2.ConstantDerivation(left.value)\n      };\n    }\n    const solver = new import_UnitBezier.default(left.handles[2], left.handles[3], right.handles[0], right.handles[1]);\n    const globalProgressionToLocalProgression = (globalProgression) => {\n      return (globalProgression - left.position) / (right.position - left.position);\n    };\n    const der = (0, import_dataverse2.prism)(() => {\n      const progression = globalProgressionToLocalProgression(progressionD.getValue());\n      const valueProgression = solver.solveSimple(progression);\n      return left.value + valueProgression * (right.value - left.value);\n    });\n    return {\n      started: true,\n      validFrom: left.position,\n      validTo: right.position,\n      der\n    };\n  },\n  error: {\n    started: true,\n    validFrom: -Infinity,\n    validTo: Infinity,\n    der: undefinedConstD\n  }\n};\n\n// shared/src/utils/deepMergeWithCache.ts\nfunction deepMergeWithCache(base, override, cache) {\n  const _cache = cache;\n  const possibleCachedValue = _cache.get(base);\n  if (possibleCachedValue && possibleCachedValue.override === override) {\n    return possibleCachedValue.merged;\n  }\n  const merged = __spreadValues({}, base);\n  for (const key of Object.keys(override)) {\n    const valueInOverride = override[key];\n    const valueInBase = base[key];\n    merged[key] = typeof valueInOverride === \"object\" && typeof valueInBase === \"object\" ? deepMergeWithCache(valueInBase, valueInOverride, cache) : typeof valueInOverride === \"undefined\" ? valueInBase : valueInOverride;\n  }\n  cache.set(base, { override, merged });\n  return merged;\n}\n\n// shared/src/utils/pointerDeep.ts\nfunction pointerDeep(base, toAppend) {\n  let p2 = base;\n  for (const k2 of toAppend) {\n    p2 = p2[k2];\n  }\n  return p2;\n}\n\n// shared/src/utils/valToAtom.ts\nvar import_dataverse3 = __toModule(require(\"@theatre/dataverse\"));\nvar valToAtom = (key, vals) => {\n  const a2 = import_dataverse3.prism.memo(key, () => new import_dataverse3.Atom(vals), []);\n  a2.setState(vals);\n  return a2;\n};\n\n// core/src/sheetObjects/SheetObject.ts\nvar import_dataverse6 = __toModule(require(\"@theatre/dataverse\"));\n\n// core/src/coreTicker.ts\nvar import_dataverse4 = __toModule(require(\"@theatre/dataverse\"));\nvar coreTicker = new import_dataverse4.Ticker();\nvar coreTicker_default = coreTicker;\nvar onAnimationFrame = (t3) => {\n  coreTicker.tick(t3);\n  window.requestAnimationFrame(onAnimationFrame);\n};\nwindow.requestAnimationFrame(onAnimationFrame);\n\n// core/src/sheetObjects/TheatreSheetObject.ts\nvar import_dataverse5 = __toModule(require(\"@theatre/dataverse\"));\nvar TheatreSheetObject = class {\n  constructor(internals) {\n    __publicField(this, \"_cache\", new SimpleCache());\n    setPrivateAPI(this, internals);\n  }\n  get type() {\n    return \"Theatre_SheetObject_PublicAPI\";\n  }\n  get props() {\n    return privateAPI(this).propsP;\n  }\n  get sheet() {\n    return privateAPI(this).sheet.publicApi;\n  }\n  get project() {\n    return privateAPI(this).sheet.project.publicApi;\n  }\n  get address() {\n    return __spreadValues({}, privateAPI(this).address);\n  }\n  _valuesDerivation() {\n    return this._cache.get(\"onValuesChangeDerivation\", () => {\n      const sheetObject = privateAPI(this);\n      const d2 = (0, import_dataverse5.prism)(() => {\n        return (0, import_dataverse5.val)(sheetObject.getValues().getValue());\n      });\n      return d2;\n    });\n  }\n  onValuesChange(fn2) {\n    return this._valuesDerivation().tapImmediate(coreTicker_default, fn2);\n  }\n  get value() {\n    return this._valuesDerivation().getValue();\n  }\n  set initialValue(val6) {\n    privateAPI(this).setInitialValue(val6);\n  }\n};\n\n// core/src/sheetObjects/SheetObject.ts\nvar SheetObject = class {\n  constructor(sheet, template, nativeObject) {\n    this.sheet = sheet;\n    this.template = template;\n    this.nativeObject = nativeObject;\n    __publicField(this, \"$$isIdentityDerivationProvider\", true);\n    __publicField(this, \"address\");\n    __publicField(this, \"publicApi\");\n    __publicField(this, \"_initialValue\", new import_dataverse6.Atom({}));\n    __publicField(this, \"_cache\", new SimpleCache());\n    this.address = __spreadProps(__spreadValues({}, template.address), {\n      sheetInstanceId: sheet.address.sheetInstanceId\n    });\n    this.publicApi = new TheatreSheetObject(this);\n  }\n  get type() {\n    return \"Theatre_SheetObject\";\n  }\n  getValues() {\n    return this._cache.get(\"getValues()\", () => (0, import_dataverse6.prism)(() => {\n      const defaults = (0, import_dataverse6.val)(this.template.getDefaultValues());\n      const initial = (0, import_dataverse6.val)(this._initialValue.pointer);\n      const withInitialCache = import_dataverse6.prism.memo(\"withInitialCache\", () => new WeakMap(), []);\n      const withInitial = deepMergeWithCache(defaults, initial, withInitialCache);\n      const statics = (0, import_dataverse6.val)(this.template.getStaticValues());\n      const withStaticsCache = import_dataverse6.prism.memo(\"withStatics\", () => new WeakMap(), []);\n      const withStatics = deepMergeWithCache(withInitial, statics, withStaticsCache);\n      let final = withStatics;\n      let sequenced;\n      {\n        const pointerToSequencedValuesD = import_dataverse6.prism.memo(\"seq\", () => this.getSequencedValues(), []);\n        const withSeqsCache = import_dataverse6.prism.memo(\"withSeqsCache\", () => new WeakMap(), []);\n        sequenced = (0, import_dataverse6.val)((0, import_dataverse6.val)(pointerToSequencedValuesD));\n        const withSeqs = deepMergeWithCache(final, sequenced, withSeqsCache);\n        final = withSeqs;\n      }\n      const a2 = valToAtom(\"finalAtom\", final);\n      return a2.pointer;\n    }));\n  }\n  getValueByPointer(pointer2) {\n    const allValuesP = (0, import_dataverse6.val)(this.getValues());\n    const { path } = (0, import_dataverse6.getPointerParts)(pointer2);\n    return (0, import_dataverse6.val)(pointerDeep(allValuesP, path));\n  }\n  getIdentityDerivation(path) {\n    return (0, import_dataverse6.prism)(() => {\n      const allValuesP = (0, import_dataverse6.val)(this.getValues());\n      return (0, import_dataverse6.val)(pointerDeep(allValuesP, path));\n    });\n  }\n  getSequencedValues() {\n    return (0, import_dataverse6.prism)(() => {\n      const tracksToProcessD = import_dataverse6.prism.memo(\"tracksToProcess\", () => this.template.getArrayOfValidSequenceTracks(), []);\n      const tracksToProcess = (0, import_dataverse6.val)(tracksToProcessD);\n      const valsAtom = new import_dataverse6.Atom({});\n      import_dataverse6.prism.effect(\"processTracks\", () => {\n        const untaps = [];\n        for (const { trackId, pathToProp } of tracksToProcess) {\n          const derivation = this._trackIdToDerivation(trackId);\n          const updateSequenceValueFromItsDerivation = () => {\n            valsAtom.setIn(pathToProp, derivation.getValue());\n          };\n          const untap = derivation.changesWithoutValues().tap(updateSequenceValueFromItsDerivation);\n          updateSequenceValueFromItsDerivation();\n          untaps.push(untap);\n        }\n        return () => {\n          for (const untap of untaps) {\n            untap();\n          }\n        };\n      }, tracksToProcess);\n      return valsAtom.pointer;\n    });\n  }\n  _trackIdToDerivation(trackId) {\n    const trackP = this.template.project.pointers.historic.sheetsById[this.address.sheetId].sequence.tracksByObject[this.address.objectKey].trackData[trackId];\n    const timeD = this.sheet.getSequence().positionDerivation;\n    return trackValueAtTime(trackP, timeD);\n  }\n  get propsP() {\n    return this._cache.get(\"propsP\", () => (0, import_dataverse6.pointer)({ root: this, path: [] }));\n  }\n  validateValue(pointer2, value) {\n  }\n  setInitialValue(val6) {\n    this.validateValue(this.propsP, val6);\n    this._initialValue.setState(val6);\n  }\n};\n\n// core/src/sheetObjects/SheetObjectTemplate.ts\nvar SheetObjectTemplate = class {\n  constructor(sheetTemplate, objectKey, nativeObject, config) {\n    this.sheetTemplate = sheetTemplate;\n    __publicField(this, \"address\");\n    __publicField(this, \"type\", \"Theatre_SheetObjectTemplate\");\n    __publicField(this, \"_config\");\n    __publicField(this, \"_cache\", new SimpleCache());\n    __publicField(this, \"project\");\n    this.address = __spreadProps(__spreadValues({}, sheetTemplate.address), { objectKey });\n    this._config = new import_dataverse7.Atom(config);\n    this.project = sheetTemplate.project;\n  }\n  get config() {\n    return this._config.getState();\n  }\n  createInstance(sheet, nativeObject, config) {\n    this._config.setState(config);\n    return new SheetObject(sheet, this, nativeObject);\n  }\n  overrideConfig(nativeObject, config) {\n    this._config.setState(config);\n  }\n  getDefaultValues() {\n    return this._cache.get(\"getDefaultValues()\", () => (0, import_dataverse7.prism)(() => {\n      const config = (0, import_dataverse7.val)(this._config.pointer);\n      return getPropDefaultsOfSheetObject(config);\n    }));\n  }\n  getStaticValues() {\n    return this._cache.get(\"getDerivationOfStatics\", () => (0, import_dataverse7.prism)(() => {\n      const pointerToSheetState = this.sheetTemplate.project.pointers.historic.sheetsById[this.address.sheetId];\n      return (0, import_dataverse7.val)(pointerToSheetState.staticOverrides.byObject[this.address.objectKey]) || {};\n    }));\n  }\n  getArrayOfValidSequenceTracks() {\n    return this._cache.get(\"getArrayOfValidSequenceTracks\", () => (0, import_dataverse7.prism)(() => {\n      const defaults = (0, import_dataverse7.val)(this.getDefaultValues());\n      const pointerToSheetState = this.project.pointers.historic.sheetsById[this.address.sheetId];\n      const trackIdByPropPath = (0, import_dataverse7.val)(pointerToSheetState.sequence.tracksByObject[this.address.objectKey].trackIdByPropPath);\n      const arrayOfIds = [];\n      if (trackIdByPropPath) {\n        for (const [pathToPropInString, trackId] of Object.entries(trackIdByPropPath)) {\n          let pathToProp;\n          try {\n            pathToProp = JSON.parse(pathToPropInString);\n          } catch (e2) {\n            logger_default.warn(`property ${JSON.stringify(pathToPropInString)} cannot be parsed. Skipping.`);\n            continue;\n          }\n          const defaultValue = get_default(defaults, pathToProp);\n          if (typeof defaultValue === \"undefined\" || typeof defaultValue === \"object\") {\n            continue;\n          }\n          arrayOfIds.push({ pathToProp, trackId });\n        }\n      } else {\n        return emptyArray;\n      }\n      if (arrayOfIds.length === 0) {\n        return emptyArray;\n      } else {\n        return arrayOfIds;\n      }\n    }));\n  }\n  getMapOfValidSequenceTracks_forStudio() {\n    if (process.env.NODE_ENV !== \"production\") {\n      return this._cache.get(\"getMapOfValidSequenceTracks_forStudio\", () => this.getArrayOfValidSequenceTracks().map((arr) => {\n        let map = {};\n        for (const { pathToProp, trackId } of arr) {\n          set_default(map, pathToProp, trackId);\n        }\n        return map;\n      }));\n    } else {\n      return new import_dataverse7.ConstantDerivation({});\n    }\n  }\n  getDefaultsAtPointer(pointer2) {\n    const { path } = (0, import_dataverse7.getPointerParts)(pointer2);\n    const defaults = this.getDefaultValues().getValue();\n    const defaultsAtPath = getDeep(defaults, path);\n    return defaultsAtPath;\n  }\n};\n\n// core/src/sheets/SheetTemplate.ts\nvar import_dataverse12 = __toModule(require(\"@theatre/dataverse\"));\n\n// shared/src/utils/didYouMean.ts\nvar import_propose = __toModule(require_propose());\nfunction didYouMean(str, dictionary, prepend = \"Did you mean \", append = \"?\") {\n  const p2 = (0, import_propose.default)(str, dictionary, {\n    threshold: 0.7\n  });\n  if (p2) {\n    return prepend + JSON.stringify(p2) + append;\n  } else {\n    return \"\";\n  }\n}\n\n// shared/src/utils/errors.ts\nvar TheatreError = class extends Error {\n};\nvar InvalidArgumentError = class extends TheatreError {\n};\n\n// core/src/sequences/Sequence.ts\nvar import_dataverse10 = __toModule(require(\"@theatre/dataverse\"));\n\n// ../node_modules/lodash-es/_trimmedEndIndex.js\nvar reWhitespace = /\\s/;\nfunction trimmedEndIndex(string2) {\n  var index = string2.length;\n  while (index-- && reWhitespace.test(string2.charAt(index))) {\n  }\n  return index;\n}\nvar trimmedEndIndex_default = trimmedEndIndex;\n\n// ../node_modules/lodash-es/_baseTrim.js\nvar reTrimStart = /^\\s+/;\nfunction baseTrim(string2) {\n  return string2 ? string2.slice(0, trimmedEndIndex_default(string2) + 1).replace(reTrimStart, \"\") : string2;\n}\nvar baseTrim_default = baseTrim;\n\n// ../node_modules/lodash-es/toNumber.js\nvar NAN = 0 / 0;\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\nvar reIsBinary = /^0b[01]+$/i;\nvar reIsOctal = /^0o[0-7]+$/i;\nvar freeParseInt = parseInt;\nfunction toNumber(value) {\n  if (typeof value == \"number\") {\n    return value;\n  }\n  if (isSymbol_default(value)) {\n    return NAN;\n  }\n  if (isObject_default(value)) {\n    var other = typeof value.valueOf == \"function\" ? value.valueOf() : value;\n    value = isObject_default(other) ? other + \"\" : other;\n  }\n  if (typeof value != \"string\") {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim_default(value);\n  var isBinary = reIsBinary.test(value);\n  return isBinary || reIsOctal.test(value) ? freeParseInt(value.slice(2), isBinary ? 2 : 8) : reIsBadHex.test(value) ? NAN : +value;\n}\nvar toNumber_default = toNumber;\n\n// ../node_modules/lodash-es/toFinite.js\nvar INFINITY3 = 1 / 0;\nvar MAX_INTEGER = 17976931348623157e292;\nfunction toFinite(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber_default(value);\n  if (value === INFINITY3 || value === -INFINITY3) {\n    var sign = value < 0 ? -1 : 1;\n    return sign * MAX_INTEGER;\n  }\n  return value === value ? value : 0;\n}\nvar toFinite_default = toFinite;\n\n// ../node_modules/lodash-es/toInteger.js\nfunction toInteger(value) {\n  var result = toFinite_default(value), remainder = result % 1;\n  return result === result ? remainder ? result - remainder : result : 0;\n}\nvar toInteger_default = toInteger;\n\n// ../node_modules/lodash-es/_overArg.js\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\nvar overArg_default = overArg;\n\n// ../node_modules/lodash-es/_getPrototype.js\nvar getPrototype = overArg_default(Object.getPrototypeOf, Object);\nvar getPrototype_default = getPrototype;\n\n// ../node_modules/lodash-es/isPlainObject.js\nvar objectTag = \"[object Object]\";\nvar funcProto3 = Function.prototype;\nvar objectProto7 = Object.prototype;\nvar funcToString3 = funcProto3.toString;\nvar hasOwnProperty6 = objectProto7.hasOwnProperty;\nvar objectCtorString = funcToString3.call(Object);\nfunction isPlainObject(value) {\n  if (!isObjectLike_default(value) || baseGetTag_default(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype_default(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty6.call(proto, \"constructor\") && proto.constructor;\n  return typeof Ctor == \"function\" && Ctor instanceof Ctor && funcToString3.call(Ctor) == objectCtorString;\n}\nvar isPlainObject_default = isPlainObject;\n\n// ../node_modules/lodash-es/_baseSlice.js\nfunction baseSlice(array, start, end) {\n  var index = -1, length = array.length;\n  if (start < 0) {\n    start = -start > length ? 0 : length + start;\n  }\n  end = end > length ? length : end;\n  if (end < 0) {\n    end += length;\n  }\n  length = start > end ? 0 : end - start >>> 0;\n  start >>>= 0;\n  var result = Array(length);\n  while (++index < length) {\n    result[index] = array[index + start];\n  }\n  return result;\n}\nvar baseSlice_default = baseSlice;\n\n// ../node_modules/lodash-es/_castSlice.js\nfunction castSlice(array, start, end) {\n  var length = array.length;\n  end = end === void 0 ? length : end;\n  return !start && end >= length ? array : baseSlice_default(array, start, end);\n}\nvar castSlice_default = castSlice;\n\n// ../node_modules/lodash-es/_hasUnicode.js\nvar rsAstralRange = \"\\\\ud800-\\\\udfff\";\nvar rsComboMarksRange = \"\\\\u0300-\\\\u036f\";\nvar reComboHalfMarksRange = \"\\\\ufe20-\\\\ufe2f\";\nvar rsComboSymbolsRange = \"\\\\u20d0-\\\\u20ff\";\nvar rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange;\nvar rsVarRange = \"\\\\ufe0e\\\\ufe0f\";\nvar rsZWJ = \"\\\\u200d\";\nvar reHasUnicode = RegExp(\"[\" + rsZWJ + rsAstralRange + rsComboRange + rsVarRange + \"]\");\nfunction hasUnicode(string2) {\n  return reHasUnicode.test(string2);\n}\nvar hasUnicode_default = hasUnicode;\n\n// ../node_modules/lodash-es/_asciiToArray.js\nfunction asciiToArray(string2) {\n  return string2.split(\"\");\n}\nvar asciiToArray_default = asciiToArray;\n\n// ../node_modules/lodash-es/_unicodeToArray.js\nvar rsAstralRange2 = \"\\\\ud800-\\\\udfff\";\nvar rsComboMarksRange2 = \"\\\\u0300-\\\\u036f\";\nvar reComboHalfMarksRange2 = \"\\\\ufe20-\\\\ufe2f\";\nvar rsComboSymbolsRange2 = \"\\\\u20d0-\\\\u20ff\";\nvar rsComboRange2 = rsComboMarksRange2 + reComboHalfMarksRange2 + rsComboSymbolsRange2;\nvar rsVarRange2 = \"\\\\ufe0e\\\\ufe0f\";\nvar rsAstral = \"[\" + rsAstralRange2 + \"]\";\nvar rsCombo = \"[\" + rsComboRange2 + \"]\";\nvar rsFitz = \"\\\\ud83c[\\\\udffb-\\\\udfff]\";\nvar rsModifier = \"(?:\" + rsCombo + \"|\" + rsFitz + \")\";\nvar rsNonAstral = \"[^\" + rsAstralRange2 + \"]\";\nvar rsRegional = \"(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}\";\nvar rsSurrPair = \"[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]\";\nvar rsZWJ2 = \"\\\\u200d\";\nvar reOptMod = rsModifier + \"?\";\nvar rsOptVar = \"[\" + rsVarRange2 + \"]?\";\nvar rsOptJoin = \"(?:\" + rsZWJ2 + \"(?:\" + [rsNonAstral, rsRegional, rsSurrPair].join(\"|\") + \")\" + rsOptVar + reOptMod + \")*\";\nvar rsSeq = rsOptVar + reOptMod + rsOptJoin;\nvar rsSymbol = \"(?:\" + [rsNonAstral + rsCombo + \"?\", rsCombo, rsRegional, rsSurrPair, rsAstral].join(\"|\") + \")\";\nvar reUnicode = RegExp(rsFitz + \"(?=\" + rsFitz + \")|\" + rsSymbol + rsSeq, \"g\");\nfunction unicodeToArray(string2) {\n  return string2.match(reUnicode) || [];\n}\nvar unicodeToArray_default = unicodeToArray;\n\n// ../node_modules/lodash-es/_stringToArray.js\nfunction stringToArray(string2) {\n  return hasUnicode_default(string2) ? unicodeToArray_default(string2) : asciiToArray_default(string2);\n}\nvar stringToArray_default = stringToArray;\n\n// ../node_modules/lodash-es/_baseProperty.js\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? void 0 : object[key];\n  };\n}\nvar baseProperty_default = baseProperty;\n\n// ../node_modules/lodash-es/_baseRepeat.js\nvar MAX_SAFE_INTEGER2 = 9007199254740991;\nvar nativeFloor = Math.floor;\nfunction baseRepeat(string2, n2) {\n  var result = \"\";\n  if (!string2 || n2 < 1 || n2 > MAX_SAFE_INTEGER2) {\n    return result;\n  }\n  do {\n    if (n2 % 2) {\n      result += string2;\n    }\n    n2 = nativeFloor(n2 / 2);\n    if (n2) {\n      string2 += string2;\n    }\n  } while (n2);\n  return result;\n}\nvar baseRepeat_default = baseRepeat;\n\n// ../node_modules/lodash-es/_asciiSize.js\nvar asciiSize = baseProperty_default(\"length\");\nvar asciiSize_default = asciiSize;\n\n// ../node_modules/lodash-es/_unicodeSize.js\nvar rsAstralRange3 = \"\\\\ud800-\\\\udfff\";\nvar rsComboMarksRange3 = \"\\\\u0300-\\\\u036f\";\nvar reComboHalfMarksRange3 = \"\\\\ufe20-\\\\ufe2f\";\nvar rsComboSymbolsRange3 = \"\\\\u20d0-\\\\u20ff\";\nvar rsComboRange3 = rsComboMarksRange3 + reComboHalfMarksRange3 + rsComboSymbolsRange3;\nvar rsVarRange3 = \"\\\\ufe0e\\\\ufe0f\";\nvar rsAstral2 = \"[\" + rsAstralRange3 + \"]\";\nvar rsCombo2 = \"[\" + rsComboRange3 + \"]\";\nvar rsFitz2 = \"\\\\ud83c[\\\\udffb-\\\\udfff]\";\nvar rsModifier2 = \"(?:\" + rsCombo2 + \"|\" + rsFitz2 + \")\";\nvar rsNonAstral2 = \"[^\" + rsAstralRange3 + \"]\";\nvar rsRegional2 = \"(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}\";\nvar rsSurrPair2 = \"[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]\";\nvar rsZWJ3 = \"\\\\u200d\";\nvar reOptMod2 = rsModifier2 + \"?\";\nvar rsOptVar2 = \"[\" + rsVarRange3 + \"]?\";\nvar rsOptJoin2 = \"(?:\" + rsZWJ3 + \"(?:\" + [rsNonAstral2, rsRegional2, rsSurrPair2].join(\"|\") + \")\" + rsOptVar2 + reOptMod2 + \")*\";\nvar rsSeq2 = rsOptVar2 + reOptMod2 + rsOptJoin2;\nvar rsSymbol2 = \"(?:\" + [rsNonAstral2 + rsCombo2 + \"?\", rsCombo2, rsRegional2, rsSurrPair2, rsAstral2].join(\"|\") + \")\";\nvar reUnicode2 = RegExp(rsFitz2 + \"(?=\" + rsFitz2 + \")|\" + rsSymbol2 + rsSeq2, \"g\");\nfunction unicodeSize(string2) {\n  var result = reUnicode2.lastIndex = 0;\n  while (reUnicode2.test(string2)) {\n    ++result;\n  }\n  return result;\n}\nvar unicodeSize_default = unicodeSize;\n\n// ../node_modules/lodash-es/_stringSize.js\nfunction stringSize(string2) {\n  return hasUnicode_default(string2) ? unicodeSize_default(string2) : asciiSize_default(string2);\n}\nvar stringSize_default = stringSize;\n\n// ../node_modules/lodash-es/_createPadding.js\nvar nativeCeil = Math.ceil;\nfunction createPadding(length, chars) {\n  chars = chars === void 0 ? \" \" : baseToString_default(chars);\n  var charsLength = chars.length;\n  if (charsLength < 2) {\n    return charsLength ? baseRepeat_default(chars, length) : chars;\n  }\n  var result = baseRepeat_default(chars, nativeCeil(length / stringSize_default(chars)));\n  return hasUnicode_default(chars) ? castSlice_default(stringToArray_default(result), 0, length).join(\"\") : result.slice(0, length);\n}\nvar createPadding_default = createPadding;\n\n// ../node_modules/lodash-es/padStart.js\nfunction padStart(string2, length, chars) {\n  string2 = toString_default(string2);\n  length = toInteger_default(length);\n  var strLength = length ? stringSize_default(string2) : 0;\n  return length && strLength < length ? createPadding_default(length - strLength, chars) + string2 : string2;\n}\nvar padStart_default = padStart;\n\n// shared/src/utils/defer.ts\nfunction defer() {\n  let resolve;\n  let reject;\n  const promise = new Promise((rs, rj) => {\n    resolve = (v2) => {\n      rs(v2);\n      deferred.status = \"resolved\";\n    };\n    reject = (v2) => {\n      rj(v2);\n      deferred.status = \"rejected\";\n    };\n  });\n  const deferred = {\n    resolve,\n    reject,\n    promise,\n    status: \"pending\"\n  };\n  return deferred;\n}\n\n// shared/src/utils/noop.ts\nvar noop = () => {\n};\nvar noop_default = noop;\n\n// core/src/sequences/playbackControllers/DefaultPlaybackController.ts\nvar import_dataverse8 = __toModule(require(\"@theatre/dataverse\"));\nvar DefaultPlaybackController = class {\n  constructor(_ticker) {\n    this._ticker = _ticker;\n    __publicField(this, \"playing\", false);\n    __publicField(this, \"_stopPlayCallback\", noop_default);\n    __publicField(this, \"_state\", new import_dataverse8.Atom({ position: 0 }));\n    __publicField(this, \"statePointer\");\n    this.statePointer = this._state.pointer;\n  }\n  destroy() {\n  }\n  pause() {\n    this._stopPlayCallback();\n    this.playing = false;\n    this._stopPlayCallback = noop_default;\n  }\n  gotoPosition(time) {\n    this._updatePositionInState(time);\n  }\n  _updatePositionInState(time) {\n    this._state.reduceState([\"position\"], () => time);\n  }\n  getCurrentPosition() {\n    return this._state.getState().position;\n  }\n  play(iterationCount, range, rate, direction) {\n    if (this.playing) {\n      this.pause();\n    }\n    this.playing = true;\n    const ticker = this._ticker;\n    const iterationLength = range[1] - range[0];\n    {\n      const startPos = this.getCurrentPosition();\n      if (startPos < range[0] || startPos > range[1]) {\n        if (direction === \"normal\" || direction === \"alternate\") {\n          this._updatePositionInState(range[0]);\n        } else if (direction === \"reverse\" || direction === \"alternateReverse\") {\n          this._updatePositionInState(range[1]);\n        }\n      } else if (direction === \"normal\" || direction === \"alternate\") {\n        if (startPos === range[1]) {\n          this._updatePositionInState(range[0]);\n        }\n      } else {\n        if (startPos === range[0]) {\n          this._updatePositionInState(range[1]);\n        }\n      }\n    }\n    const deferred = defer();\n    const initialTickerTime = ticker.time;\n    const totalPlaybackLength = iterationLength * iterationCount;\n    let initialElapsedPos = this.getCurrentPosition() - range[0];\n    if (direction === \"reverse\" || direction === \"alternateReverse\") {\n      initialElapsedPos = range[1] - this.getCurrentPosition();\n    }\n    const tick = (currentTickerTime) => {\n      const elapsedTickerTime = Math.max(currentTickerTime - initialTickerTime, 0);\n      const elapsedTickerTimeInSeconds = elapsedTickerTime / 1e3;\n      const elapsedPos = Math.min(elapsedTickerTimeInSeconds * rate + initialElapsedPos, totalPlaybackLength);\n      if (elapsedPos !== totalPlaybackLength) {\n        const iterationNumber = Math.floor(elapsedPos / iterationLength);\n        let currentIterationPos = elapsedPos / iterationLength % 1 * iterationLength;\n        if (direction !== \"normal\") {\n          if (direction === \"reverse\") {\n            currentIterationPos = iterationLength - currentIterationPos;\n          } else {\n            const isCurrentIterationNumberEven = iterationNumber % 2 === 0;\n            if (direction === \"alternate\") {\n              if (!isCurrentIterationNumberEven) {\n                currentIterationPos = iterationLength - currentIterationPos;\n              }\n            } else {\n              if (isCurrentIterationNumberEven) {\n                currentIterationPos = iterationLength - currentIterationPos;\n              }\n            }\n          }\n        }\n        this._updatePositionInState(currentIterationPos + range[0]);\n        requestNextTick();\n      } else {\n        if (direction === \"normal\") {\n          this._updatePositionInState(range[1]);\n        } else if (direction === \"reverse\") {\n          this._updatePositionInState(range[0]);\n        } else {\n          const isLastIterationEven = (iterationCount - 1) % 2 === 0;\n          if (direction === \"alternate\") {\n            if (isLastIterationEven) {\n              this._updatePositionInState(range[1]);\n            } else {\n              this._updatePositionInState(range[0]);\n            }\n          } else {\n            if (isLastIterationEven) {\n              this._updatePositionInState(range[0]);\n            } else {\n              this._updatePositionInState(range[1]);\n            }\n          }\n        }\n        this.playing = false;\n        deferred.resolve(true);\n      }\n    };\n    this._stopPlayCallback = () => {\n      ticker.offThisOrNextTick(tick);\n      ticker.offNextTick(tick);\n      if (this.playing)\n        deferred.resolve(false);\n    };\n    const requestNextTick = () => ticker.onNextTick(tick);\n    ticker.onThisOrNextTick(tick);\n    return deferred.promise;\n  }\n};\n\n// core/src/sequences/playbackControllers/AudioPlaybackController.ts\nvar import_dataverse9 = __toModule(require(\"@theatre/dataverse\"));\nvar AudioPlaybackController = class {\n  constructor(_ticker, _decodedBuffer, _audioContext, _nodeDestination) {\n    this._ticker = _ticker;\n    this._decodedBuffer = _decodedBuffer;\n    this._audioContext = _audioContext;\n    this._nodeDestination = _nodeDestination;\n    __publicField(this, \"_mainGain\");\n    __publicField(this, \"_state\", new import_dataverse9.Atom({ position: 0 }));\n    __publicField(this, \"statePointer\");\n    __publicField(this, \"_stopPlayCallback\", noop_default);\n    __publicField(this, \"playing\", false);\n    this.statePointer = this._state.pointer;\n    this._mainGain = this._audioContext.createGain();\n    this._mainGain.connect(this._nodeDestination);\n  }\n  destroy() {\n  }\n  pause() {\n    this._stopPlayCallback();\n    this.playing = false;\n    this._stopPlayCallback = noop_default;\n  }\n  gotoPosition(time) {\n    this._updatePositionInState(time);\n  }\n  _updatePositionInState(time) {\n    this._state.reduceState([\"position\"], () => time);\n  }\n  getCurrentPosition() {\n    return this._state.getState().position;\n  }\n  play(iterationCount, range, rate, direction) {\n    if (this.playing) {\n      this.pause();\n    }\n    this.playing = true;\n    const ticker = this._ticker;\n    let startPos = this.getCurrentPosition();\n    const iterationLength = range[1] - range[0];\n    if (direction !== \"normal\") {\n      throw new InvalidArgumentError(`Audio-controlled sequences can only be played in the \"normal\" direction. '${direction}' given.`);\n    }\n    if (startPos < range[0] || startPos > range[1]) {\n      this._updatePositionInState(range[0]);\n    } else if (startPos === range[1]) {\n      this._updatePositionInState(range[0]);\n    }\n    startPos = this.getCurrentPosition();\n    const deferred = defer();\n    const currentSource = this._audioContext.createBufferSource();\n    currentSource.buffer = this._decodedBuffer;\n    currentSource.connect(this._mainGain);\n    currentSource.playbackRate.value = rate;\n    if (iterationCount > 1e3) {\n      console.warn(`Audio-controlled sequences cannot have an iterationCount larger than 1000. It has been clamped to 1000.`);\n      iterationCount = 1e3;\n    }\n    if (iterationCount > 1) {\n      currentSource.loop = true;\n      currentSource.loopStart = range[0];\n      currentSource.loopEnd = range[1];\n    }\n    const initialTickerTime = ticker.time;\n    let initialElapsedPos = startPos - range[0];\n    const totalPlaybackLength = iterationLength * iterationCount;\n    currentSource.start(0, startPos, totalPlaybackLength - initialElapsedPos);\n    const tick = (currentTickerTime) => {\n      const elapsedTickerTime = Math.max(currentTickerTime - initialTickerTime, 0);\n      const elapsedTickerTimeInSeconds = elapsedTickerTime / 1e3;\n      const elapsedPos = Math.min(elapsedTickerTimeInSeconds * rate + initialElapsedPos, totalPlaybackLength);\n      if (elapsedPos !== totalPlaybackLength) {\n        let currentIterationPos = elapsedPos / iterationLength % 1 * iterationLength;\n        this._updatePositionInState(currentIterationPos + range[0]);\n        requestNextTick();\n      } else {\n        this._updatePositionInState(range[1]);\n        this.playing = false;\n        cleanup();\n        deferred.resolve(true);\n      }\n    };\n    const cleanup = () => {\n      currentSource.stop();\n      currentSource.disconnect();\n    };\n    this._stopPlayCallback = () => {\n      cleanup();\n      ticker.offThisOrNextTick(tick);\n      ticker.offNextTick(tick);\n      if (this.playing)\n        deferred.resolve(false);\n    };\n    const requestNextTick = () => ticker.onNextTick(tick);\n    ticker.onThisOrNextTick(tick);\n    return deferred.promise;\n  }\n};\n\n// core/src/sequences/TheatreSequence.ts\nvar TheatreSequence = class {\n  get type() {\n    return \"Theatre_Sequence_PublicAPI\";\n  }\n  constructor(sheet) {\n    setPrivateAPI(this, sheet);\n  }\n  play(conf) {\n    if (privateAPI(this)._project.isReady()) {\n      return privateAPI(this).play(conf);\n    } else {\n      if (process.env.NODE_ENV !== \"production\") {\n        logger_default.warn(`You seem to have called sequence.play() before the project has finished loading.\nThis would **not** a problem in production when using '@theatre/core', since Theatre loads instantly in core mode. However, when using '@theatre/studio', it takes a few milliseconds for it to load your project's state, before which your sequences cannot start playing.\n\nTo fix this, simply defer calling sequence.play() until after the project is loaded, like this:\nproject.ready.then(() => {\n  sequence.play()\n})`);\n      }\n      const d2 = defer();\n      d2.resolve(true);\n      return d2.promise;\n    }\n  }\n  pause() {\n    privateAPI(this).pause();\n  }\n  get position() {\n    return privateAPI(this).position;\n  }\n  set position(position) {\n    privateAPI(this).position = position;\n  }\n  async attachAudio(args) {\n    const { audioContext, destinationNode, decodedBuffer } = await resolveAudioBuffer(args);\n    const playbackController = new AudioPlaybackController(coreTicker_default, decodedBuffer, audioContext, destinationNode);\n    privateAPI(this).replacePlaybackController(playbackController);\n  }\n};\nasync function resolveAudioBuffer(args) {\n  const audioContext = args.audioContext || new AudioContext();\n  const decodedBufferDeferred = defer();\n  if (args.source instanceof AudioBuffer) {\n    decodedBufferDeferred.resolve(args.source);\n  } else if (typeof args.source !== \"string\") {\n    throw new Error(`Error validating arguments to sequence.attachAudio(). args.source must either be a string or an instance of AudioBuffer.`);\n  } else {\n    let fetchResponse;\n    try {\n      fetchResponse = await fetch(args.source);\n    } catch (e2) {\n      console.error(e2);\n      throw new Error(`Could not fetch '${args.source}'. Network error logged above.`);\n    }\n    let buffer;\n    try {\n      buffer = await fetchResponse.arrayBuffer();\n    } catch (e2) {\n      console.error(e2);\n      throw new Error(`Could not read '${args.source}' as an arrayBuffer.`);\n    }\n    audioContext.decodeAudioData(buffer, decodedBufferDeferred.resolve, decodedBufferDeferred.reject);\n  }\n  let decodedBuffer;\n  try {\n    decodedBuffer = await decodedBufferDeferred.promise;\n  } catch (e2) {\n    console.error(e2);\n    throw new Error(`Could not decode ${args.source} as an audio file.`);\n  }\n  const destinationNode = args.destinationNode || audioContext.destination;\n  return {\n    destinationNode,\n    audioContext,\n    decodedBuffer\n  };\n}\n\n// core/src/sequences/Sequence.ts\nvar possibleDirections = [\n  \"normal\",\n  \"reverse\",\n  \"alternate\",\n  \"alternateReverse\"\n];\nvar Sequence = class {\n  constructor(_project, _sheet, _lengthD, _subUnitsPerUnitD, playbackController) {\n    this._project = _project;\n    this._sheet = _sheet;\n    this._lengthD = _lengthD;\n    this._subUnitsPerUnitD = _subUnitsPerUnitD;\n    __publicField(this, \"address\");\n    __publicField(this, \"publicApi\");\n    __publicField(this, \"_playbackControllerBox\");\n    __publicField(this, \"_statePointerDerivation\");\n    __publicField(this, \"_positionD\");\n    __publicField(this, \"_positionFormatterD\");\n    __publicField(this, \"_playableRangeD\");\n    __publicField(this, \"closestGridPosition\", (posInUnitSpace) => {\n      const subUnitsPerUnit = this.subUnitsPerUnit;\n      const gridLength = 1 / subUnitsPerUnit;\n      return parseFloat((Math.round(posInUnitSpace / gridLength) * gridLength).toFixed(3));\n    });\n    this.address = __spreadProps(__spreadValues({}, this._sheet.address), { sequenceName: \"default\" });\n    this.publicApi = new TheatreSequence(this);\n    this._playbackControllerBox = new import_dataverse10.Box(playbackController != null ? playbackController : new DefaultPlaybackController(coreTicker_default));\n    this._statePointerDerivation = this._playbackControllerBox.derivation.map((playbackController2) => playbackController2.statePointer);\n    this._positionD = this._statePointerDerivation.flatMap((statePointer) => (0, import_dataverse10.valueDerivation)(statePointer.position));\n    this._positionFormatterD = this._subUnitsPerUnitD.map((subUnitsPerUnit) => new TimeBasedPositionFormatter(subUnitsPerUnit));\n  }\n  get positionFormatter() {\n    return this._positionFormatterD.getValue();\n  }\n  get derivationToStatePointer() {\n    return this._statePointerDerivation;\n  }\n  get length() {\n    return this._lengthD.getValue();\n  }\n  get positionDerivation() {\n    return this._positionD;\n  }\n  get position() {\n    return this._playbackControllerBox.get().getCurrentPosition();\n  }\n  get subUnitsPerUnit() {\n    return this._subUnitsPerUnitD.getValue();\n  }\n  get positionSnappedToGrid() {\n    return this.closestGridPosition(this.position);\n  }\n  set position(requestedPosition) {\n    let position = requestedPosition;\n    this.pause();\n    if (process.env.NODE_ENV !== \"production\") {\n      if (typeof position !== \"number\") {\n        logger_default.error(`value t in sequence.position = t must be a number. ${typeof position} given`);\n        position = 0;\n      }\n      if (position < 0) {\n        logger_default.error(`sequence.position must be a positive number. ${position} given`);\n        position = 0;\n      }\n    }\n    if (position > this.length) {\n      position = this.length;\n    }\n    const dur = this.length;\n    this._playbackControllerBox.get().gotoPosition(position > dur ? dur : position);\n  }\n  getDurationCold() {\n    return this._lengthD.getValue();\n  }\n  get playing() {\n    return this._playbackControllerBox.get().playing;\n  }\n  _makeRangeFromSequenceTemplate() {\n    return (0, import_dataverse10.prism)(() => {\n      return [0, (0, import_dataverse10.val)(this._lengthD)];\n    });\n  }\n  async play(conf) {\n    const sequenceDuration = this.length;\n    const range = conf && conf.range ? conf.range : [0, sequenceDuration];\n    if (process.env.NODE_ENV !== \"production\") {\n      if (typeof range[0] !== \"number\" || range[0] < 0) {\n        throw new InvalidArgumentError(`Argument conf.range[0] in sequence.play(conf) must be a positive number. ${JSON.stringify(range[0])} given.`);\n      }\n      if (range[0] >= sequenceDuration) {\n        throw new InvalidArgumentError(`Argument conf.range[0] in sequence.play(conf) cannot be longer than the duration of the sequence, which is ${sequenceDuration}s. ${JSON.stringify(range[0])} given.`);\n      }\n      if (typeof range[1] !== \"number\" || range[1] <= 0) {\n        throw new InvalidArgumentError(`Argument conf.range[1] in sequence.play(conf) must be a number larger than zero. ${JSON.stringify(range[1])} given.`);\n      }\n      if (range[1] > sequenceDuration) {\n        logger_default.warn(`Argument conf.range[1] in sequence.play(conf) cannot be longer than the duration of the sequence, which is ${sequenceDuration}s. ${JSON.stringify(range[1])} given.`);\n        range[1] = sequenceDuration;\n      }\n      if (range[1] <= range[0]) {\n        throw new InvalidArgumentError(`Argument conf.range[1] in sequence.play(conf) must be larger than conf.range[0]. ${JSON.stringify(range)} given.`);\n      }\n    }\n    const iterationCount = conf && typeof conf.iterationCount === \"number\" ? conf.iterationCount : 1;\n    if (process.env.NODE_ENV !== \"production\") {\n      if (!(Number.isInteger(iterationCount) && iterationCount > 0) && iterationCount !== Infinity) {\n        throw new InvalidArgumentError(`Argument conf.iterationCount in sequence.play(conf) must be an integer larger than 0. ${JSON.stringify(iterationCount)} given.`);\n      }\n    }\n    const rate = conf && typeof conf.rate !== \"undefined\" ? conf.rate : 1;\n    if (process.env.NODE_ENV !== \"production\") {\n      if (typeof rate !== \"number\" || rate === 0) {\n        throw new InvalidArgumentError(`Argument conf.rate in sequence.play(conf) must be a number larger than 0. ${JSON.stringify(rate)} given.`);\n      }\n      if (rate < 0) {\n        throw new InvalidArgumentError(`Argument conf.rate in sequence.play(conf) must be a number larger than 0. ${JSON.stringify(rate)} given. If you want the animation to play backwards, try setting conf.direction to 'reverse' or 'alternateReverse'.`);\n      }\n    }\n    const direction = conf && conf.direction ? conf.direction : \"normal\";\n    if (process.env.NODE_ENV !== \"production\") {\n      if (possibleDirections.indexOf(direction) === -1) {\n        throw new InvalidArgumentError(`Argument conf.direction in sequence.play(conf) must be one of ${JSON.stringify(possibleDirections)}. ${JSON.stringify(direction)} given. ${didYouMean(direction, possibleDirections)}`);\n      }\n    }\n    return await this._play(iterationCount, [range[0], range[1]], rate, direction);\n  }\n  _play(iterationCount, range, rate, direction) {\n    return this._playbackControllerBox.get().play(iterationCount, range, rate, direction);\n  }\n  pause() {\n    this._playbackControllerBox.get().pause();\n  }\n  replacePlaybackController(playbackController) {\n    this.pause();\n    const oldController = this._playbackControllerBox.get();\n    this._playbackControllerBox.set(playbackController);\n    const time = oldController.getCurrentPosition();\n    oldController.destroy();\n    playbackController.gotoPosition(time);\n  }\n};\nvar TimeBasedPositionFormatter = class {\n  constructor(_fps) {\n    this._fps = _fps;\n  }\n  formatSubUnitForGrid(posInUnitSpace) {\n    const subSecondPos = posInUnitSpace % 1;\n    const frame = 1 / this._fps;\n    const frames = Math.round(subSecondPos / frame);\n    return frames + \"f\";\n  }\n  formatFullUnitForGrid(posInUnitSpace) {\n    let p2 = posInUnitSpace;\n    let s2 = \"\";\n    if (p2 >= hour) {\n      const hours = Math.floor(p2 / hour);\n      s2 += hours + \"h\";\n      p2 = p2 % hour;\n    }\n    if (p2 >= minute) {\n      const minutes = Math.floor(p2 / minute);\n      s2 += minutes + \"m\";\n      p2 = p2 % minute;\n    }\n    if (p2 >= second) {\n      const seconds = Math.floor(p2 / second);\n      s2 += seconds + \"s\";\n      p2 = p2 % second;\n    }\n    const frame = 1 / this._fps;\n    if (p2 >= frame) {\n      const frames = Math.floor(p2 / frame);\n      s2 += frames + \"f\";\n      p2 = p2 % frame;\n    }\n    return s2.length === 0 ? \"0s\" : s2;\n  }\n  formatForPlayhead(posInUnitSpace) {\n    let p2 = posInUnitSpace;\n    let s2 = \"\";\n    if (p2 >= hour) {\n      const hours = Math.floor(p2 / hour);\n      s2 += padStart_default(hours.toString(), 2, \"0\") + \"h\";\n      p2 = p2 % hour;\n    }\n    if (p2 >= minute) {\n      const minutes = Math.floor(p2 / minute);\n      s2 += padStart_default(minutes.toString(), 2, \"0\") + \"m\";\n      p2 = p2 % minute;\n    } else if (s2.length > 0) {\n      s2 += \"00m\";\n    }\n    if (p2 >= second) {\n      const seconds = Math.floor(p2 / second);\n      s2 += padStart_default(seconds.toString(), 2, \"0\") + \"s\";\n      p2 = p2 % second;\n    } else {\n      s2 += \"00s\";\n    }\n    const frameLength = 1 / this._fps;\n    if (p2 >= frameLength) {\n      const frames = Math.round(p2 / frameLength);\n      s2 += padStart_default(frames.toString(), 2, \"0\") + \"f\";\n      p2 = p2 % frameLength;\n    } else if (p2 / frameLength > 0.98) {\n      const frames = 1;\n      s2 += padStart_default(frames.toString(), 2, \"0\") + \"f\";\n      p2 = p2 % frameLength;\n    } else {\n      s2 += \"00f\";\n    }\n    return s2.length === 0 ? \"00s00f\" : s2;\n  }\n  formatBasic(posInUnitSpace) {\n    return posInUnitSpace.toFixed(2) + \"s\";\n  }\n};\nvar second = 1;\nvar minute = second * 60;\nvar hour = minute * 60;\n\n// core/src/propTypes/index.ts\nvar propTypes_exports = {};\n__export(propTypes_exports, {\n  boolean: () => boolean,\n  compound: () => compound,\n  number: () => number,\n  string: () => string,\n  stringLiteral: () => stringLiteral\n});\n\n// shared/src/utils/ellipsify.ts\nfunction ellipsify(str, maxLength) {\n  if (str.length <= maxLength)\n    return str;\n  return str.substr(0, maxLength - 3) + \"...\";\n}\n\n// shared/src/utils/userReadableTypeOfValue.ts\nvar userReadableTypeOfValue = (v2) => {\n  if (typeof v2 === \"string\") {\n    return `string(\"${ellipsify(v2, 10)}\")`;\n  } else if (typeof v2 === \"number\") {\n    return `number(${ellipsify(String(v2), 10)})`;\n  } else if (v2 === null) {\n    return \"null\";\n  } else if (v2 === void 0) {\n    return \"undefined\";\n  } else if (typeof v2 === \"boolean\") {\n    return String(v2);\n  } else if (Array.isArray(v2)) {\n    return \"array\";\n  } else if (typeof v2 === \"object\") {\n    return \"object\";\n  } else {\n    return \"unknown\";\n  }\n};\nvar userReadableTypeOfValue_default = userReadableTypeOfValue;\n\n// core/src/propTypes/internals.ts\nvar propTypeSymbol = Symbol(\"TheatrePropType_Basic\");\nfunction isLonghandPropType(t3) {\n  return typeof t3 === \"object\" && !!t3 && t3[propTypeSymbol] === \"TheatrePropType\";\n}\nfunction toLonghandProp(p2) {\n  if (typeof p2 === \"number\") {\n    return number(p2);\n  } else if (typeof p2 === \"boolean\") {\n    return boolean(p2);\n  } else if (typeof p2 === \"string\") {\n    return string(p2);\n  } else if (typeof p2 === \"object\" && !!p2) {\n    if (isLonghandPropType(p2))\n      return p2;\n    if (isPlainObject_default(p2)) {\n      return compound(p2);\n    } else {\n      throw new InvalidArgumentError(`This value is not a valid prop type: ${userReadableTypeOfValue_default(p2)}`);\n    }\n  } else {\n    throw new InvalidArgumentError(`This value is not a valid prop type: ${userReadableTypeOfValue_default(p2)}`);\n  }\n}\nfunction sanitizeCompoundProps(props) {\n  const sanitizedProps = {};\n  if (process.env.NODE_ENV !== \"production\") {\n    if (typeof props !== \"object\" || !props) {\n      throw new InvalidArgumentError(`t.compound() expects an object, like: {x: 10}. ${userReadableTypeOfValue_default(props)} given.`);\n    }\n  }\n  for (const key of Object.keys(props)) {\n    if (process.env.NODE_ENV !== \"production\") {\n      if (typeof key !== \"string\") {\n        throw new InvalidArgumentError(`t.compound()'s keys must be all strings. ${userReadableTypeOfValue_default(key)} given.`);\n      } else if (key.length === 0 || !key.match(/^\\w+$/)) {\n        throw new InvalidArgumentError(`compound key ${userReadableTypeOfValue_default(key)} is invalid. The keys must be alphanumeric and start with a letter.`);\n      } else if (key.length > 64) {\n        throw new InvalidArgumentError(`compound key ${userReadableTypeOfValue_default(key)} is too long.`);\n      }\n    }\n    const val6 = props[key];\n    if (isLonghandPropType(val6)) {\n      sanitizedProps[key] = val6;\n    } else {\n      sanitizedProps[key] = toLonghandProp(val6);\n    }\n  }\n  return sanitizedProps;\n}\n\n// core/src/propTypes/index.ts\nvar validateCommonOpts = (fnCallSignature, opts) => {\n  if (process.env.NODE_ENV !== \"production\") {\n    if (opts === void 0)\n      return;\n    if (typeof opts !== \"object\" || opts === null) {\n      throw new Error(`opts in ${fnCallSignature} must either be undefined or an object.`);\n    }\n    if (Object.prototype.hasOwnProperty.call(opts, \"label\")) {\n      const { label } = opts;\n      if (typeof label !== \"string\") {\n        throw new Error(`opts.label in ${fnCallSignature} should be a string. ${userReadableTypeOfValue_default(label)} given.`);\n      }\n      if (label.trim().length !== label.length) {\n        throw new Error(`opts.label in ${fnCallSignature} should not start/end with whitespace. \"${label}\" given.`);\n      }\n      if (label.length === 0) {\n        throw new Error(`opts.label in ${fnCallSignature} should not be an empty string. If you wish to have no label, remove opts.label from opts.`);\n      }\n    }\n  }\n};\nvar compound = (props, opts) => {\n  validateCommonOpts(\"t.compound(props, opts)\", opts);\n  return {\n    type: \"compound\",\n    props: sanitizeCompoundProps(props),\n    valueType: null,\n    [propTypeSymbol]: \"TheatrePropType\",\n    label: opts == null ? void 0 : opts.label\n  };\n};\nvar number = (defaultValue, opts) => {\n  var _a;\n  if (process.env.NODE_ENV !== \"production\") {\n    validateCommonOpts(\"t.number(defaultValue, opts)\", opts);\n    if (typeof defaultValue !== \"number\" || !isFinite(defaultValue)) {\n      throw new Error(`Argument defaultValue in t.number(defaultValue) must be a number. ${userReadableTypeOfValue_default(defaultValue)} given.`);\n    }\n    if (typeof opts === \"object\" && opts !== null) {\n      if (Object.prototype.hasOwnProperty.call(opts, \"range\")) {\n        if (!Array.isArray(opts.range)) {\n          throw new Error(`opts.range in t.number(defaultValue, opts) must be a tuple of two numbers. ${userReadableTypeOfValue_default(opts.range)} given.`);\n        }\n        if (opts.range.length !== 2) {\n          throw new Error(`opts.range in t.number(defaultValue, opts) must have two elements. ${opts.range.length} given.`);\n        }\n        if (!opts.range.every((n2) => typeof n2 === \"number\" && !isNaN(n2))) {\n          throw new Error(`opts.range in t.number(defaultValue, opts) must be a tuple of two numbers.`);\n        }\n        if (opts.range[0] >= opts.range[1]) {\n          throw new Error(`opts.range[0] in t.number(defaultValue, opts) must be smaller than opts.range[1]. Given: ${JSON.stringify(opts.range)}`);\n        }\n      }\n      if (Object.prototype.hasOwnProperty.call(opts, \"nudgeMultiplier\")) {\n        if (typeof opts.nudgeMultiplier !== \"number\" || !isFinite(opts.nudgeMultiplier)) {\n          throw new Error(`opts.nudgeMultiplier in t.number(defaultValue, opts) must be a finite number. ${userReadableTypeOfValue_default(opts.nudgeMultiplier)} given.`);\n        }\n      }\n      if (Object.prototype.hasOwnProperty.call(opts, \"nudgeFn\")) {\n        if (typeof (opts == null ? void 0 : opts.nudgeFn) !== \"function\") {\n          throw new Error(`opts.nudgeFn in t.number(defaultValue, opts) must be a function. ${userReadableTypeOfValue_default(opts.nudgeFn)} given.`);\n        }\n      }\n    }\n  }\n  return __spreadProps(__spreadValues({\n    type: \"number\",\n    valueType: 0,\n    default: defaultValue,\n    [propTypeSymbol]: \"TheatrePropType\"\n  }, opts ? opts : {}), {\n    label: opts == null ? void 0 : opts.label,\n    nudgeFn: (_a = opts == null ? void 0 : opts.nudgeFn) != null ? _a : defaultNumberNudgeFn,\n    nudgeMultiplier: typeof (opts == null ? void 0 : opts.nudgeMultiplier) === \"number\" ? opts.nudgeMultiplier : 1\n  });\n};\nvar boolean = (defaultValue, opts) => {\n  if (process.env.NODE_ENV !== \"production\") {\n    validateCommonOpts(\"t.boolean(defaultValue, opts)\", opts);\n    if (typeof defaultValue !== \"boolean\") {\n      throw new Error(`defaultValue in t.boolean(defaultValue) must be a boolean. ${userReadableTypeOfValue_default(defaultValue)} given.`);\n    }\n  }\n  return {\n    type: \"boolean\",\n    default: defaultValue,\n    valueType: null,\n    [propTypeSymbol]: \"TheatrePropType\",\n    label: opts == null ? void 0 : opts.label\n  };\n};\nvar string = (defaultValue, opts) => {\n  if (process.env.NODE_ENV !== \"production\") {\n    validateCommonOpts(\"t.string(defaultValue, opts)\", opts);\n    if (typeof defaultValue !== \"string\") {\n      throw new Error(`defaultValue in t.string(defaultValue) must be a string. ${userReadableTypeOfValue_default(defaultValue)} given.`);\n    }\n  }\n  return {\n    type: \"string\",\n    default: defaultValue,\n    valueType: null,\n    [propTypeSymbol]: \"TheatrePropType\",\n    label: opts == null ? void 0 : opts.label\n  };\n};\nfunction stringLiteral(defaultValue, options, opts) {\n  var _a;\n  return {\n    type: \"stringLiteral\",\n    default: defaultValue,\n    options: __spreadValues({}, options),\n    [propTypeSymbol]: \"TheatrePropType\",\n    valueType: null,\n    as: (_a = opts == null ? void 0 : opts.as) != null ? _a : \"menu\",\n    label: opts == null ? void 0 : opts.label\n  };\n}\nvar defaultNumberNudgeFn = ({\n  config,\n  deltaX,\n  deltaFraction,\n  magnitude\n}) => {\n  const { range } = config;\n  if (range) {\n    return deltaFraction * (range[1] - range[0]) * magnitude * config.nudgeMultiplier;\n  }\n  return deltaX * magnitude * config.nudgeMultiplier;\n};\n\n// shared/src/utils/slashedPaths.ts\nvar sanifySlashedPath = (p2) => p2.replace(/^[\\s\\/]*/, \"\").replace(/[\\s\\/]*$/, \"\").replace(/\\s*\\/\\s*/, \" / \");\nvar getValidationErrorsOfSlashedPath = (p2) => {\n  if (typeof p2 !== \"string\")\n    return `it is not a string. (it is a ${typeof p2})`;\n  const components = p2.split(/\\//);\n  if (components.length === 0)\n    return `it is empty.`;\n  for (let i2 = 0; i2 < components.length; i2++) {\n    const component = components[i2].trim();\n    if (component.length === 0)\n      return `the component #${i2 + 1} is empty.`;\n    if (component.length > 32)\n      return `the component '${component}' must have 32 characters or less.`;\n  }\n};\nfunction validateAndSanitiseSlashedPathOrThrow(unsanitisedPath, fnName) {\n  const sanitisedPath = sanifySlashedPath(unsanitisedPath);\n  if (process.env.NODE_ENV !== \"development\") {\n    return sanitisedPath;\n  }\n  const validation = getValidationErrorsOfSlashedPath(sanitisedPath);\n  if (validation) {\n    throw new InvalidArgumentError(`The path in ${fnName}(${typeof unsanitisedPath === \"string\" ? `\"${unsanitisedPath}\"` : \"\"}) is invalid because ${validation}`);\n  }\n  if (unsanitisedPath !== sanitisedPath) {\n    logger_default.warn(`The path in ${fnName}(\"${unsanitisedPath}\") was sanitised to \"${sanitisedPath}\".`);\n  }\n  return sanitisedPath;\n}\n\n// core/src/sheets/TheatreSheet.ts\nvar import_fast_deep_equal = __toModule(require_fast_deep_equal());\nvar weakMapOfUnsanitizedProps = new WeakMap();\nvar TheatreSheet = class {\n  get type() {\n    return \"Theatre_Sheet_PublicAPI\";\n  }\n  constructor(sheet) {\n    setPrivateAPI(this, sheet);\n  }\n  object(key, config) {\n    const internal = privateAPI(this);\n    const sanitizedPath = validateAndSanitiseSlashedPathOrThrow(key, `sheet.object(\"${key}\", ...)`);\n    const existingObject = internal.getObject(sanitizedPath);\n    const nativeObject = null;\n    if (existingObject) {\n      if (process.env.NODE_ENV !== \"production\") {\n        const prevConfig = weakMapOfUnsanitizedProps.get(existingObject);\n        if (prevConfig) {\n          if (!(0, import_fast_deep_equal.default)(config, prevConfig)) {\n            throw new Error(`You seem to have called sheet.object(\"${key}\", config) twice, with different values for \\`config\\`. This is disallowed because changing the config of an object on the fly would make it difficult to reason about.\n\nYou can fix this by either re-using the existing object, or calling sheet.object(\"${key}\", config) with the same config.`);\n          }\n        }\n      }\n      return existingObject.publicApi;\n    } else {\n      const sanitizedConfig = compound(config);\n      const object = internal.createObject(sanitizedPath, nativeObject, sanitizedConfig);\n      if (process.env.NODE_ENV !== \"production\") {\n        weakMapOfUnsanitizedProps.set(object, config);\n      }\n      return object.publicApi;\n    }\n  }\n  get sequence() {\n    return privateAPI(this).getSequence().publicApi;\n  }\n  get project() {\n    return privateAPI(this).project.publicApi;\n  }\n  get address() {\n    return __spreadValues({}, privateAPI(this).address);\n  }\n};\n\n// core/src/sheets/Sheet.ts\nvar import_dataverse11 = __toModule(require(\"@theatre/dataverse\"));\nvar Sheet = class {\n  constructor(template, instanceId) {\n    this.template = template;\n    this.instanceId = instanceId;\n    __publicField(this, \"_objects\", new import_dataverse11.Atom({}));\n    __publicField(this, \"_sequence\");\n    __publicField(this, \"address\");\n    __publicField(this, \"publicApi\");\n    __publicField(this, \"project\");\n    __publicField(this, \"objectsP\", this._objects.pointer);\n    __publicField(this, \"type\", \"Theatre_Sheet\");\n    this.project = template.project;\n    this.address = __spreadProps(__spreadValues({}, template.address), {\n      sheetInstanceId: this.instanceId\n    });\n    this.publicApi = new TheatreSheet(this);\n  }\n  createObject(key, nativeObject, config) {\n    const objTemplate = this.template.getObjectTemplate(key, nativeObject, config);\n    const object = objTemplate.createInstance(this, nativeObject, config);\n    this._objects.setIn([key], object);\n    return object;\n  }\n  getObject(key) {\n    return this._objects.getState()[key];\n  }\n  getSequence() {\n    if (!this._sequence) {\n      const lengthD = (0, import_dataverse11.valueDerivation)(this.project.pointers.historic.sheetsById[this.address.sheetId].sequence.length).map((s2) => typeof s2 === \"number\" ? s2 : 10);\n      const subUnitsPerUnitD = (0, import_dataverse11.valueDerivation)(this.project.pointers.historic.sheetsById[this.address.sheetId].sequence.subUnitsPerUnit).map((s2) => typeof s2 === \"number\" ? s2 : 30);\n      this._sequence = new Sequence(this.template.project, this, lengthD, subUnitsPerUnitD);\n    }\n    return this._sequence;\n  }\n};\n\n// core/src/sheets/SheetTemplate.ts\nvar SheetTemplate = class {\n  constructor(project, sheetId) {\n    this.project = project;\n    __publicField(this, \"type\", \"Theatre_SheetTemplate\");\n    __publicField(this, \"address\");\n    __publicField(this, \"_instances\", new import_dataverse12.Atom({}));\n    __publicField(this, \"instancesP\", this._instances.pointer);\n    __publicField(this, \"_objectTemplates\", new import_dataverse12.Atom({}));\n    __publicField(this, \"objectTemplatesP\", this._objectTemplates.pointer);\n    this.address = __spreadProps(__spreadValues({}, project.address), { sheetId });\n  }\n  getInstance(instanceId) {\n    let inst = this._instances.getState()[instanceId];\n    if (!inst) {\n      inst = new Sheet(this, instanceId);\n      this._instances.setIn([instanceId], inst);\n    }\n    return inst;\n  }\n  getObjectTemplate(key, nativeObject, config) {\n    let template = this._objectTemplates.getState()[key];\n    if (!template) {\n      template = new SheetObjectTemplate(this, key, nativeObject, config);\n      this._objectTemplates.setIn([key], template);\n    }\n    return template;\n  }\n};\n\n// core/src/projects/Project.ts\nvar import_dataverse13 = __toModule(require(\"@theatre/dataverse\"));\nvar import_dataverse14 = __toModule(require(\"@theatre/dataverse\"));\n\n// shared/src/utils/delay.ts\nvar delay = (dur) => new Promise((resolve) => setTimeout(resolve, dur));\nvar delay_default = delay;\n\n// ../node_modules/immer/dist/immer.esm.js\nfunction n(n2) {\n  for (var t3 = arguments.length, r2 = Array(t3 > 1 ? t3 - 1 : 0), e2 = 1; e2 < t3; e2++)\n    r2[e2 - 1] = arguments[e2];\n  if (process.env.NODE_ENV !== \"production\") {\n    var i2 = Y[n2], o2 = i2 ? typeof i2 == \"function\" ? i2.apply(null, r2) : i2 : \"unknown error nr: \" + n2;\n    throw Error(\"[Immer] \" + o2);\n  }\n  throw Error(\"[Immer] minified error nr: \" + n2 + (r2.length ? \" \" + r2.map(function(n3) {\n    return \"'\" + n3 + \"'\";\n  }).join(\",\") : \"\") + \". Find the full error at: https://bit.ly/3cXEKWf\");\n}\nfunction t2(n2) {\n  return !!n2 && !!n2[Q];\n}\nfunction r(n2) {\n  return !!n2 && (function(n3) {\n    if (!n3 || typeof n3 != \"object\")\n      return false;\n    var t3 = Object.getPrototypeOf(n3);\n    if (t3 === null)\n      return true;\n    var r2 = Object.hasOwnProperty.call(t3, \"constructor\") && t3.constructor;\n    return r2 === Object || typeof r2 == \"function\" && Function.toString.call(r2) === Z;\n  }(n2) || Array.isArray(n2) || !!n2[L] || !!n2.constructor[L] || s(n2) || v(n2));\n}\nfunction e(r2) {\n  return t2(r2) || n(23, r2), r2[Q].t;\n}\nfunction i(n2, t3, r2) {\n  r2 === void 0 && (r2 = false), o(n2) === 0 ? (r2 ? Object.keys : nn)(n2).forEach(function(e2) {\n    r2 && typeof e2 == \"symbol\" || t3(e2, n2[e2], n2);\n  }) : n2.forEach(function(r3, e2) {\n    return t3(e2, r3, n2);\n  });\n}\nfunction o(n2) {\n  var t3 = n2[Q];\n  return t3 ? t3.i > 3 ? t3.i - 4 : t3.i : Array.isArray(n2) ? 1 : s(n2) ? 2 : v(n2) ? 3 : 0;\n}\nfunction u(n2, t3) {\n  return o(n2) === 2 ? n2.has(t3) : Object.prototype.hasOwnProperty.call(n2, t3);\n}\nfunction a(n2, t3) {\n  return o(n2) === 2 ? n2.get(t3) : n2[t3];\n}\nfunction f(n2, t3, r2) {\n  var e2 = o(n2);\n  e2 === 2 ? n2.set(t3, r2) : e2 === 3 ? (n2.delete(t3), n2.add(r2)) : n2[t3] = r2;\n}\nfunction c(n2, t3) {\n  return n2 === t3 ? n2 !== 0 || 1 / n2 == 1 / t3 : n2 != n2 && t3 != t3;\n}\nfunction s(n2) {\n  return X && n2 instanceof Map;\n}\nfunction v(n2) {\n  return q && n2 instanceof Set;\n}\nfunction p(n2) {\n  return n2.o || n2.t;\n}\nfunction l(n2) {\n  if (Array.isArray(n2))\n    return Array.prototype.slice.call(n2);\n  var t3 = tn(n2);\n  delete t3[Q];\n  for (var r2 = nn(t3), e2 = 0; e2 < r2.length; e2++) {\n    var i2 = r2[e2], o2 = t3[i2];\n    o2.writable === false && (o2.writable = true, o2.configurable = true), (o2.get || o2.set) && (t3[i2] = { configurable: true, writable: true, enumerable: o2.enumerable, value: n2[i2] });\n  }\n  return Object.create(Object.getPrototypeOf(n2), t3);\n}\nfunction d(n2, e2) {\n  return e2 === void 0 && (e2 = false), y(n2) || t2(n2) || !r(n2) ? n2 : (o(n2) > 1 && (n2.set = n2.add = n2.clear = n2.delete = h), Object.freeze(n2), e2 && i(n2, function(n3, t3) {\n    return d(t3, true);\n  }, true), n2);\n}\nfunction h() {\n  n(2);\n}\nfunction y(n2) {\n  return n2 == null || typeof n2 != \"object\" || Object.isFrozen(n2);\n}\nfunction b(t3) {\n  var r2 = rn[t3];\n  return r2 || n(18, t3), r2;\n}\nfunction _() {\n  return process.env.NODE_ENV === \"production\" || U || n(0), U;\n}\nfunction j(n2, t3) {\n  t3 && (b(\"Patches\"), n2.u = [], n2.s = [], n2.v = t3);\n}\nfunction O(n2) {\n  g(n2), n2.p.forEach(S), n2.p = null;\n}\nfunction g(n2) {\n  n2 === U && (U = n2.l);\n}\nfunction w(n2) {\n  return U = { p: [], l: U, h: n2, m: true, _: 0 };\n}\nfunction S(n2) {\n  var t3 = n2[Q];\n  t3.i === 0 || t3.i === 1 ? t3.j() : t3.O = true;\n}\nfunction P(t3, e2) {\n  e2._ = e2.p.length;\n  var i2 = e2.p[0], o2 = t3 !== void 0 && t3 !== i2;\n  return e2.h.g || b(\"ES5\").S(e2, t3, o2), o2 ? (i2[Q].P && (O(e2), n(4)), r(t3) && (t3 = M(e2, t3), e2.l || x(e2, t3)), e2.u && b(\"Patches\").M(i2[Q], t3, e2.u, e2.s)) : t3 = M(e2, i2, []), O(e2), e2.u && e2.v(e2.u, e2.s), t3 !== H ? t3 : void 0;\n}\nfunction M(n2, t3, r2) {\n  if (y(t3))\n    return t3;\n  var e2 = t3[Q];\n  if (!e2)\n    return i(t3, function(i2, o3) {\n      return A(n2, e2, t3, i2, o3, r2);\n    }, true), t3;\n  if (e2.A !== n2)\n    return t3;\n  if (!e2.P)\n    return x(n2, e2.t, true), e2.t;\n  if (!e2.I) {\n    e2.I = true, e2.A._--;\n    var o2 = e2.i === 4 || e2.i === 5 ? e2.o = l(e2.k) : e2.o;\n    i(e2.i === 3 ? new Set(o2) : o2, function(t4, i2) {\n      return A(n2, e2, o2, t4, i2, r2);\n    }), x(n2, o2, false), r2 && n2.u && b(\"Patches\").R(e2, r2, n2.u, n2.s);\n  }\n  return e2.o;\n}\nfunction A(e2, i2, o2, a2, c2, s2) {\n  if (process.env.NODE_ENV !== \"production\" && c2 === o2 && n(5), t2(c2)) {\n    var v2 = M(e2, c2, s2 && i2 && i2.i !== 3 && !u(i2.D, a2) ? s2.concat(a2) : void 0);\n    if (f(o2, a2, v2), !t2(v2))\n      return;\n    e2.m = false;\n  }\n  if (r(c2) && !y(c2)) {\n    if (!e2.h.F && e2._ < 1)\n      return;\n    M(e2, c2), i2 && i2.A.l || x(e2, c2);\n  }\n}\nfunction x(n2, t3, r2) {\n  r2 === void 0 && (r2 = false), n2.h.F && n2.m && d(t3, r2);\n}\nfunction z(n2, t3) {\n  var r2 = n2[Q];\n  return (r2 ? p(r2) : n2)[t3];\n}\nfunction I(n2, t3) {\n  if (t3 in n2)\n    for (var r2 = Object.getPrototypeOf(n2); r2; ) {\n      var e2 = Object.getOwnPropertyDescriptor(r2, t3);\n      if (e2)\n        return e2;\n      r2 = Object.getPrototypeOf(r2);\n    }\n}\nfunction k(n2) {\n  n2.P || (n2.P = true, n2.l && k(n2.l));\n}\nfunction E(n2) {\n  n2.o || (n2.o = l(n2.t));\n}\nfunction R(n2, t3, r2) {\n  var e2 = s(t3) ? b(\"MapSet\").N(t3, r2) : v(t3) ? b(\"MapSet\").T(t3, r2) : n2.g ? function(n3, t4) {\n    var r3 = Array.isArray(n3), e3 = { i: r3 ? 1 : 0, A: t4 ? t4.A : _(), P: false, I: false, D: {}, l: t4, t: n3, k: null, o: null, j: null, C: false }, i2 = e3, o2 = en;\n    r3 && (i2 = [e3], o2 = on);\n    var u2 = Proxy.revocable(i2, o2), a2 = u2.revoke, f2 = u2.proxy;\n    return e3.k = f2, e3.j = a2, f2;\n  }(t3, r2) : b(\"ES5\").J(t3, r2);\n  return (r2 ? r2.A : _()).p.push(e2), e2;\n}\nfunction D(e2) {\n  return t2(e2) || n(22, e2), function n2(t3) {\n    if (!r(t3))\n      return t3;\n    var e3, u2 = t3[Q], c2 = o(t3);\n    if (u2) {\n      if (!u2.P && (u2.i < 4 || !b(\"ES5\").K(u2)))\n        return u2.t;\n      u2.I = true, e3 = F(t3, c2), u2.I = false;\n    } else\n      e3 = F(t3, c2);\n    return i(e3, function(t4, r2) {\n      u2 && a(u2.t, t4) === r2 || f(e3, t4, n2(r2));\n    }), c2 === 3 ? new Set(e3) : e3;\n  }(e2);\n}\nfunction F(n2, t3) {\n  switch (t3) {\n    case 2:\n      return new Map(n2);\n    case 3:\n      return Array.from(n2);\n  }\n  return l(n2);\n}\nvar G;\nvar U;\nvar W = typeof Symbol != \"undefined\" && typeof Symbol(\"x\") == \"symbol\";\nvar X = typeof Map != \"undefined\";\nvar q = typeof Set != \"undefined\";\nvar B = typeof Proxy != \"undefined\" && Proxy.revocable !== void 0 && typeof Reflect != \"undefined\";\nvar H = W ? Symbol.for(\"immer-nothing\") : ((G = {})[\"immer-nothing\"] = true, G);\nvar L = W ? Symbol.for(\"immer-draftable\") : \"__$immer_draftable\";\nvar Q = W ? Symbol.for(\"immer-state\") : \"__$immer_state\";\nvar V = typeof Symbol != \"undefined\" && Symbol.iterator || \"@@iterator\";\nvar Y = { 0: \"Illegal state\", 1: \"Immer drafts cannot have computed properties\", 2: \"This object has been frozen and should not be mutated\", 3: function(n2) {\n  return \"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? \" + n2;\n}, 4: \"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.\", 5: \"Immer forbids circular references\", 6: \"The first or second argument to `produce` must be a function\", 7: \"The third argument to `produce` must be a function or undefined\", 8: \"First argument to `createDraft` must be a plain object, an array, or an immerable object\", 9: \"First argument to `finishDraft` must be a draft returned by `createDraft`\", 10: \"The given draft is already finalized\", 11: \"Object.defineProperty() cannot be used on an Immer draft\", 12: \"Object.setPrototypeOf() cannot be used on an Immer draft\", 13: \"Immer only supports deleting array indices\", 14: \"Immer only supports setting array indices and the 'length' property\", 15: function(n2) {\n  return \"Cannot apply patch, path doesn't resolve: \" + n2;\n}, 16: 'Sets cannot have \"replace\" patches.', 17: function(n2) {\n  return \"Unsupported patch operation: \" + n2;\n}, 18: function(n2) {\n  return \"The plugin for '\" + n2 + \"' has not been loaded into Immer. To enable the plugin, import and call `enable\" + n2 + \"()` when initializing your application.\";\n}, 20: \"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available\", 21: function(n2) {\n  return \"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '\" + n2 + \"'\";\n}, 22: function(n2) {\n  return \"'current' expects a draft, got: \" + n2;\n}, 23: function(n2) {\n  return \"'original' expects a draft, got: \" + n2;\n}, 24: \"Patching reserved attributes like __proto__, prototype and constructor is not allowed\" };\nvar Z = \"\" + Object.prototype.constructor;\nvar nn = typeof Reflect != \"undefined\" && Reflect.ownKeys ? Reflect.ownKeys : Object.getOwnPropertySymbols !== void 0 ? function(n2) {\n  return Object.getOwnPropertyNames(n2).concat(Object.getOwnPropertySymbols(n2));\n} : Object.getOwnPropertyNames;\nvar tn = Object.getOwnPropertyDescriptors || function(n2) {\n  var t3 = {};\n  return nn(n2).forEach(function(r2) {\n    t3[r2] = Object.getOwnPropertyDescriptor(n2, r2);\n  }), t3;\n};\nvar rn = {};\nvar en = { get: function(n2, t3) {\n  if (t3 === Q)\n    return n2;\n  var e2 = p(n2);\n  if (!u(e2, t3))\n    return function(n3, t4, r2) {\n      var e3, i3 = I(t4, r2);\n      return i3 ? \"value\" in i3 ? i3.value : (e3 = i3.get) === null || e3 === void 0 ? void 0 : e3.call(n3.k) : void 0;\n    }(n2, e2, t3);\n  var i2 = e2[t3];\n  return n2.I || !r(i2) ? i2 : i2 === z(n2.t, t3) ? (E(n2), n2.o[t3] = R(n2.A.h, i2, n2)) : i2;\n}, has: function(n2, t3) {\n  return t3 in p(n2);\n}, ownKeys: function(n2) {\n  return Reflect.ownKeys(p(n2));\n}, set: function(n2, t3, r2) {\n  var e2 = I(p(n2), t3);\n  if (e2 == null ? void 0 : e2.set)\n    return e2.set.call(n2.k, r2), true;\n  if (!n2.P) {\n    var i2 = z(p(n2), t3), o2 = i2 == null ? void 0 : i2[Q];\n    if (o2 && o2.t === r2)\n      return n2.o[t3] = r2, n2.D[t3] = false, true;\n    if (c(r2, i2) && (r2 !== void 0 || u(n2.t, t3)))\n      return true;\n    E(n2), k(n2);\n  }\n  return n2.o[t3] === r2 && typeof r2 != \"number\" && (r2 !== void 0 || t3 in n2.o) || (n2.o[t3] = r2, n2.D[t3] = true, true);\n}, deleteProperty: function(n2, t3) {\n  return z(n2.t, t3) !== void 0 || t3 in n2.t ? (n2.D[t3] = false, E(n2), k(n2)) : delete n2.D[t3], n2.o && delete n2.o[t3], true;\n}, getOwnPropertyDescriptor: function(n2, t3) {\n  var r2 = p(n2), e2 = Reflect.getOwnPropertyDescriptor(r2, t3);\n  return e2 ? { writable: true, configurable: n2.i !== 1 || t3 !== \"length\", enumerable: e2.enumerable, value: r2[t3] } : e2;\n}, defineProperty: function() {\n  n(11);\n}, getPrototypeOf: function(n2) {\n  return Object.getPrototypeOf(n2.t);\n}, setPrototypeOf: function() {\n  n(12);\n} };\nvar on = {};\ni(en, function(n2, t3) {\n  on[n2] = function() {\n    return arguments[0] = arguments[0][0], t3.apply(this, arguments);\n  };\n}), on.deleteProperty = function(t3, r2) {\n  return process.env.NODE_ENV !== \"production\" && isNaN(parseInt(r2)) && n(13), en.deleteProperty.call(this, t3[0], r2);\n}, on.set = function(t3, r2, e2) {\n  return process.env.NODE_ENV !== \"production\" && r2 !== \"length\" && isNaN(parseInt(r2)) && n(14), en.set.call(this, t3[0], r2, e2, t3[0]);\n};\nvar un = function() {\n  function e2(t3) {\n    var e3 = this;\n    this.g = B, this.F = true, this.produce = function(t4, i3, o2) {\n      if (typeof t4 == \"function\" && typeof i3 != \"function\") {\n        var u2 = i3;\n        i3 = t4;\n        var a2 = e3;\n        return function(n2) {\n          var t5 = this;\n          n2 === void 0 && (n2 = u2);\n          for (var r2 = arguments.length, e4 = Array(r2 > 1 ? r2 - 1 : 0), o3 = 1; o3 < r2; o3++)\n            e4[o3 - 1] = arguments[o3];\n          return a2.produce(n2, function(n3) {\n            var r3;\n            return (r3 = i3).call.apply(r3, [t5, n3].concat(e4));\n          });\n        };\n      }\n      var f2;\n      if (typeof i3 != \"function\" && n(6), o2 !== void 0 && typeof o2 != \"function\" && n(7), r(t4)) {\n        var c2 = w(e3), s2 = R(e3, t4, void 0), v2 = true;\n        try {\n          f2 = i3(s2), v2 = false;\n        } finally {\n          v2 ? O(c2) : g(c2);\n        }\n        return typeof Promise != \"undefined\" && f2 instanceof Promise ? f2.then(function(n2) {\n          return j(c2, o2), P(n2, c2);\n        }, function(n2) {\n          throw O(c2), n2;\n        }) : (j(c2, o2), P(f2, c2));\n      }\n      if (!t4 || typeof t4 != \"object\") {\n        if ((f2 = i3(t4)) === H)\n          return;\n        return f2 === void 0 && (f2 = t4), e3.F && d(f2, true), f2;\n      }\n      n(21, t4);\n    }, this.produceWithPatches = function(n2, t4) {\n      return typeof n2 == \"function\" ? function(t5) {\n        for (var r3 = arguments.length, i4 = Array(r3 > 1 ? r3 - 1 : 0), o2 = 1; o2 < r3; o2++)\n          i4[o2 - 1] = arguments[o2];\n        return e3.produceWithPatches(t5, function(t6) {\n          return n2.apply(void 0, [t6].concat(i4));\n        });\n      } : [e3.produce(n2, t4, function(n3, t5) {\n        r2 = n3, i3 = t5;\n      }), r2, i3];\n      var r2, i3;\n    }, typeof (t3 == null ? void 0 : t3.useProxies) == \"boolean\" && this.setUseProxies(t3.useProxies), typeof (t3 == null ? void 0 : t3.autoFreeze) == \"boolean\" && this.setAutoFreeze(t3.autoFreeze);\n  }\n  var i2 = e2.prototype;\n  return i2.createDraft = function(e3) {\n    r(e3) || n(8), t2(e3) && (e3 = D(e3));\n    var i3 = w(this), o2 = R(this, e3, void 0);\n    return o2[Q].C = true, g(i3), o2;\n  }, i2.finishDraft = function(t3, r2) {\n    var e3 = t3 && t3[Q];\n    process.env.NODE_ENV !== \"production\" && (e3 && e3.C || n(9), e3.I && n(10));\n    var i3 = e3.A;\n    return j(i3, r2), P(void 0, i3);\n  }, i2.setAutoFreeze = function(n2) {\n    this.F = n2;\n  }, i2.setUseProxies = function(t3) {\n    t3 && !B && n(20), this.g = t3;\n  }, i2.applyPatches = function(n2, r2) {\n    var e3;\n    for (e3 = r2.length - 1; e3 >= 0; e3--) {\n      var i3 = r2[e3];\n      if (i3.path.length === 0 && i3.op === \"replace\") {\n        n2 = i3.value;\n        break;\n      }\n    }\n    var o2 = b(\"Patches\").$;\n    return t2(n2) ? o2(n2, r2) : this.produce(n2, function(n3) {\n      return o2(n3, r2.slice(e3 + 1));\n    });\n  }, e2;\n}();\nvar an = new un();\nvar fn = an.produce;\nvar cn = an.produceWithPatches.bind(an);\nvar sn = an.setAutoFreeze.bind(an);\nvar vn = an.setUseProxies.bind(an);\nvar pn = an.applyPatches.bind(an);\nvar ln = an.createDraft.bind(an);\nvar dn = an.finishDraft.bind(an);\n\n// shared/src/globals.ts\nvar globals = {\n  currentProjectStateDefinitionVersion: \"0.4.0\"\n};\nvar globals_default = globals;\n\n// core/src/projects/initialiseProjectState.ts\nasync function initialiseProjectState(studio, project, onDiskState) {\n  await delay_default(0);\n  studio.transaction(({ drafts }) => {\n    var _a;\n    const projectId = project.address.projectId;\n    drafts.ephemeral.coreByProject[projectId] = {\n      lastExportedObject: null,\n      loadingState: { type: \"loading\" }\n    };\n    drafts.ahistoric.coreByProject[projectId] = {\n      ahistoricStuff: \"\"\n    };\n    function useInitialState() {\n      drafts.ephemeral.coreByProject[projectId].loadingState = {\n        type: \"loaded\"\n      };\n      drafts.historic.coreByProject[projectId] = {\n        sheetsById: {},\n        definitionVersion: globals_default.currentProjectStateDefinitionVersion,\n        revisionHistory: []\n      };\n    }\n    function useOnDiskState(state) {\n      drafts.ephemeral.coreByProject[projectId].loadingState = {\n        type: \"loaded\"\n      };\n      drafts.historic.coreByProject[projectId] = state;\n    }\n    function useBrowserState() {\n      drafts.ephemeral.coreByProject[projectId].loadingState = {\n        type: \"loaded\"\n      };\n    }\n    function browserStateIsNotBasedOnDiskState(onDiskState2) {\n      drafts.ephemeral.coreByProject[projectId].loadingState = {\n        type: \"browserStateIsNotBasedOnDiskState\",\n        onDiskState: onDiskState2\n      };\n    }\n    const browserState = (_a = e(drafts.historic)) == null ? void 0 : _a.coreByProject[project.address.projectId];\n    if (!browserState) {\n      if (!onDiskState) {\n        useInitialState();\n      } else {\n        useOnDiskState(onDiskState);\n      }\n    } else {\n      if (!onDiskState) {\n        useBrowserState();\n      } else {\n        if (browserState.revisionHistory.indexOf(onDiskState.revisionHistory[0]) == -1) {\n          browserStateIsNotBasedOnDiskState(onDiskState);\n        } else {\n          useBrowserState();\n        }\n      }\n    }\n  });\n}\n\n// core/src/projects/Project.ts\nvar Project = class {\n  constructor(id, config = {}, publicApi) {\n    this.config = config;\n    this.publicApi = publicApi;\n    __publicField(this, \"pointers\");\n    __publicField(this, \"_pointerProxies\");\n    __publicField(this, \"address\");\n    __publicField(this, \"_readyDeferred\");\n    __publicField(this, \"_sheetTemplates\", new import_dataverse14.Atom({}));\n    __publicField(this, \"sheetTemplatesP\", this._sheetTemplates.pointer);\n    __publicField(this, \"_studio\");\n    __publicField(this, \"type\", \"Theatre_Project\");\n    var _a;\n    this.address = { projectId: id };\n    const onDiskStateAtom = new import_dataverse14.Atom({\n      ahistoric: {\n        ahistoricStuff: \"\"\n      },\n      historic: (_a = config.state) != null ? _a : {\n        sheetsById: {},\n        definitionVersion: globals_default.currentProjectStateDefinitionVersion,\n        revisionHistory: []\n      },\n      ephemeral: {\n        loadingState: {\n          type: \"loaded\"\n        },\n        lastExportedObject: null\n      }\n    });\n    this._pointerProxies = {\n      historic: new import_dataverse13.PointerProxy(onDiskStateAtom.pointer.historic),\n      ahistoric: new import_dataverse13.PointerProxy(onDiskStateAtom.pointer.ahistoric),\n      ephemeral: new import_dataverse13.PointerProxy(onDiskStateAtom.pointer.ephemeral)\n    };\n    this.pointers = {\n      historic: this._pointerProxies.historic.pointer,\n      ahistoric: this._pointerProxies.ahistoric.pointer,\n      ephemeral: this._pointerProxies.ephemeral.pointer\n    };\n    projectsSingleton_default.add(id, this);\n    this._readyDeferred = defer();\n    if (config.state) {\n      setTimeout(() => {\n        if (!this._studio) {\n          this._readyDeferred.resolve(void 0);\n        }\n      }, 0);\n    } else {\n      setTimeout(() => {\n        if (!this._studio) {\n          throw new Error(`Argument config.state in Theatre.getProject(\"${id}\", config) is empty. This is fine while you are using @theatre/core along with @theatre/sutdio. But since @theatre/studio is not loaded, the state of project \"${id}\" will be empty.\n\nTo fix this, you need to add @theatre/studio into the bundle and export the projet's state. Learn how to do that at https://docs.theatrejs.com/in-depth/#exporting`);\n        }\n      }, 1e3);\n    }\n  }\n  attachToStudio(studio) {\n    if (this._studio) {\n      if (this._studio !== studio) {\n        throw new Error(`Project ${this.address.projectId} is already attached to studio ${this._studio.address.studioId}`);\n      } else {\n        console.warn(`Project ${this.address.projectId} is already attached to studio ${this._studio.address.studioId}`);\n        return;\n      }\n    }\n    this._studio = studio;\n    studio.initialized.then(async () => {\n      await initialiseProjectState(studio, this, this.config.state);\n      this._pointerProxies.historic.setPointer(studio.atomP.historic.coreByProject[this.address.projectId]);\n      this._pointerProxies.ahistoric.setPointer(studio.atomP.ahistoric.coreByProject[this.address.projectId]);\n      this._pointerProxies.ephemeral.setPointer(studio.atomP.ephemeral.coreByProject[this.address.projectId]);\n      this._readyDeferred.resolve(void 0);\n    });\n  }\n  get isAttachedToStudio() {\n    return !!this._studio;\n  }\n  get ready() {\n    return this._readyDeferred.promise;\n  }\n  isReady() {\n    return this._readyDeferred.status === \"resolved\";\n  }\n  getOrCreateSheet(sheetId, instanceId = \"default\") {\n    let template = this._sheetTemplates.getState()[sheetId];\n    if (!template) {\n      template = new SheetTemplate(this, sheetId);\n      this._sheetTemplates.setIn([sheetId], template);\n    }\n    return template.getInstance(instanceId);\n  }\n};\n\n// shared/src/utils/sanitizers.ts\nvar _validateSym = (val6, thingy, range) => {\n  if (typeof val6 !== \"string\") {\n    return `${thingy} must be a string. ${userReadableTypeOfValue_default(val6)} given.`;\n  } else if (val6.trim().length !== val6.length) {\n    return `${thingy} must not have leading or trailing spaces. '${val6}' given.`;\n  } else if (val6.length < range[0] || val6.length > range[1]) {\n    return `${thingy} must have between ${range[0]} and ${range[1]} characters. '${val6}' given.`;\n  }\n};\nvar validateName = (name, thingy, shouldThrow = false) => {\n  const result = _validateSym(name, thingy, [3, 32]);\n  if (typeof result === \"string\" && shouldThrow) {\n    throw new InvalidArgumentError(result);\n  } else {\n    return result;\n  }\n};\nvar validateInstanceId = (name, thingy, shouldThrow = false) => {\n  const result = _validateSym(name, thingy, [1, 32]);\n  if (typeof result === \"string\" && shouldThrow) {\n    throw new InvalidArgumentError(result);\n  } else {\n    return result;\n  }\n};\n\n// core/src/projects/TheatreProject.ts\nvar TheatreProject = class {\n  get type() {\n    return \"Theatre_Project_PublicAPI\";\n  }\n  constructor(id, config = {}) {\n    setPrivateAPI(this, new Project(id, config, this));\n  }\n  get ready() {\n    return privateAPI(this).ready;\n  }\n  get isReady() {\n    return privateAPI(this).isReady();\n  }\n  get address() {\n    return __spreadValues({}, privateAPI(this).address);\n  }\n  sheet(sheetId, instanceId = \"default\") {\n    const sanitizedPath = validateAndSanitiseSlashedPathOrThrow(sheetId, \"project.sheet\");\n    if (process.env.NODE_ENV !== \"production\") {\n      validateInstanceId(instanceId, \"instanceId in project.sheet(sheetId, instanceId)\", true);\n    }\n    return privateAPI(this).getOrCreateSheet(sanitizedPath, instanceId).publicApi;\n  }\n};\n\n// core/src/coreExports.ts\nvar import_fast_deep_equal2 = __toModule(require_fast_deep_equal());\nvar import_dataverse15 = __toModule(require(\"@theatre/dataverse\"));\nvar import_dataverse16 = __toModule(require(\"@theatre/dataverse\"));\nfunction getProject(id, config = {}) {\n  const restOfConfig = __objRest(config, []);\n  const existingProject = projectsSingleton_default.get(id);\n  if (existingProject) {\n    if (process.env.NODE_ENV !== \"production\") {\n      if (!(0, import_fast_deep_equal2.default)(config, existingProject.config)) {\n        throw new Error(`You seem to have called Theatre.getProject(\"${id}\", config) twice, with different config objects. This is disallowed because changing the config of a project on the fly can lead to hard-to-debug issues.\n\nYou can fix this by either calling Theatre.getProject() once per projectId, or calling it multiple times but with the exact same config.`);\n      }\n    }\n    return existingProject.publicApi;\n  }\n  if (process.env.NODE_ENV !== \"production\") {\n    validateName(id, \"projectName in Theatre.getProject(projectName)\", true);\n    validateProjectIdOrThrow(id);\n  }\n  if (config.state) {\n    if (process.env.NODE_ENV !== \"production\") {\n      shallowValidateOnDiskState(id, config.state);\n    } else {\n      deepValidateOnDiskState(id, config.state);\n    }\n  }\n  return new TheatreProject(id, restOfConfig);\n}\nvar shallowValidateOnDiskState = (projectId, s2) => {\n  if (Array.isArray(s2) || s2 == null || s2.definitionVersion !== globals_default.currentProjectStateDefinitionVersion) {\n    throw new InvalidArgumentError(`Error validating conf.state in Theatre.getProject(${JSON.stringify(projectId)}, conf). The state seems to be formatted in a way that is unreadable to Theatre.js. Read more at https://docs.theatrejs.com`);\n  }\n};\nvar deepValidateOnDiskState = (projectId, s2) => {\n  shallowValidateOnDiskState(projectId, s2);\n};\nvar validateProjectIdOrThrow = (value) => {\n  if (typeof value !== \"string\") {\n    throw new InvalidArgumentError(`Argument 'projectId' in \\`Theatre.getProject(projectId, ...)\\` must be a string. Instead, it was ${userReadableTypeOfValue_default(value)}.`);\n  }\n  const idTrimmed = value.trim();\n  if (idTrimmed.length !== value.length) {\n    throw new InvalidArgumentError(`Argument 'projectId' in \\`Theatre.getProject(\"${value}\", ...)\\` should not have surrounding whitespace.`);\n  }\n  if (idTrimmed.length < 3) {\n    throw new InvalidArgumentError(`Argument 'projectId' in \\`Theatre.getProject(\"${value}\", ...)\\` should be at least 3 characters long.`);\n  }\n};\nfunction onChange(pointer2, callback) {\n  if ((0, import_dataverse15.isPointer)(pointer2)) {\n    const derivation = (0, import_dataverse16.valueDerivation)(pointer2);\n    return derivation.tapImmediate(coreTicker_default, callback);\n  } else if ((0, import_dataverse16.isDerivation)(pointer2)) {\n    return pointer2.tapImmediate(coreTicker_default, callback);\n  } else {\n    throw new Error(`Called onChange(p) where p is neither a pointer nor a derivation.`);\n  }\n}\n\n// shared/src/globalVariableNames.ts\nvar studioBundle = \"__TheatreJS_StudioBundle\";\nvar coreBundle = \"__TheatreJS_CoreBundle\";\n\n// core/src/CoreBundle.ts\nvar CoreBundle = class {\n  constructor() {\n    __publicField(this, \"_studio\");\n  }\n  get type() {\n    return \"Theatre_CoreBundle\";\n  }\n  get version() {\n    return \"0.4.1\";\n  }\n  getBitsForStudio(studio, callback) {\n    if (this._studio) {\n      throw new Error(`@theatre/core is already attached to @theatre/studio`);\n    }\n    this._studio = studio;\n    const bits = {\n      projectsP: projectsSingleton_default.atom.pointer.projects,\n      privateAPI,\n      coreExports: coreExports_exports\n    };\n    callback(bits);\n  }\n};\n\n// core/src/index.ts\nregisterCoreBundle();\nfunction registerCoreBundle() {\n  if (typeof window == \"undefined\")\n    return;\n  const existingBundle = window[coreBundle];\n  if (typeof existingBundle !== \"undefined\") {\n    if (typeof existingBundle === \"object\" && existingBundle && typeof existingBundle.version === \"string\") {\n      throw new Error(`It seems that the module '@theatre/core' is loaded more than once. This could have two possible causes:\n1. You might have two separate versions of theatre in node_modules.\n2. Or this might be a bundling misconfiguration, in case you're using a bundler like Webpack/ESBuild/Rollup.\n\nNote that it **is okay** to import '@theatre/core' multiple times. But those imports should point to the same module.`);\n    } else {\n      throw new Error(`The variable window.${coreBundle} seems to be already set by a module other than @theatre/core.`);\n    }\n  }\n  const coreBundle2 = new CoreBundle();\n  window[coreBundle] = coreBundle2;\n  const possibleExistingStudioBundle = window[studioBundle];\n  if (possibleExistingStudioBundle && possibleExistingStudioBundle !== null && possibleExistingStudioBundle.type === \"Theatre_StudioBundle\") {\n    possibleExistingStudioBundle.registerCoreBundle(coreBundle2);\n  }\n}\n/**\n * @license\n * Lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"es\" -o ./`\n * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n//# sourceMappingURL=index.js.map\n","import {getProject, types as t} from \"@theatre/core\"\nimport state from \"./state.json\"\n//import studio from \"@theatre/studio\"\n//studio.initialize()\n\nconst proj = getProject(\"foobarloremipsum\", {state})\nconst sheet = proj.sheet(\"Bouncing box\")\n\nconst nudgableNumber = t.number(1, {nudgeMultiplier: 0.01})\n\nfunction makeBouncingBox(i: number) {\n  const component = document.getElementById(\"component\")\n  //const boxContainer = document.getElementById(\"boxContainer\")\n  const boxDiv = document.getElementById(\"box\")\n  const dustDiv = document.getElementById(\"dust\")\n  const textDiv = document.getElementById(\"text\")\n  var fl=false\n  var kb=false\n  window.addEventListener(\"keyup\",(evt)=>{\n    if (evt.key.match('5'))\n      kb=true\n  })\n  window.addEventListener(\"keydown\",(evt)=>{ \n    if (evt.key.match('c')||evt.key.match('C'))\n     if (component!=null)\n        component.style.backgroundColor = \"#B2FE99\"\n    if(evt.key.match('4'))\n      if (kb==true){\n        if (component!=null)\n          component.style.backgroundColor = \"#C3BBEC\"\n        kb=false\n        }\n  })\n  component?.addEventListener(\"click\", () => {\n    fl=true\n    component.style.backgroundColor=\"#000\"\n    sheet.sequence.play({iterationCount: 3}).then(()=>{\n      fl=false\n      if (textDiv!=null) \n        textDiv.innerText=textObj1.value.content})\n      if (textDiv!=null) \n        textDiv.innerText=textObj3.value.content\n  })\n\n  const boxObj = sheet.object(\"Box\", {\n    y: 0,\n    stretch: nudgableNumber,\n  })\n  boxObj.onValuesChange(({y, stretch}) => {\n    if (boxDiv!=null)\n     boxDiv.style.transform = `translateY(${-y}px) scale(${\n        1 / stretch\n      }, ${stretch})`\n  })\n\n  const dustObj = sheet.object(\"Dust\", {\n    opacity: nudgableNumber,\n    scaleX: nudgableNumber,\n  })\n  dustObj.onValuesChange(({opacity, scaleX}) => {\n    if (dustDiv!=null){\n      dustDiv.style.opacity = String(opacity)\n      dustDiv.style.transform = `scaleX(${scaleX})`\n    }\n  })\n\n  const textObj1 = sheet.object(\"Text1\", {content: \"foo\", position: {x1: 10, y1: 10}})\n  const textObj2 = sheet.object(\"Text2\", {content: \"bar\", position: {x2: 10, y2: 10}})\n  const textObj3 = sheet.object(\"Text3\", {content: \"baz\", position: {x3: 10, y3: 10}})\n\n  textObj1.onValuesChange((values) => {\n      if(textDiv!=null){\n        textDiv.style.left = values.position.x1 + 'px'\n        textDiv.style.top = values.position.y1 + 'px'\n      }\n  })\n  textObj2.onValuesChange((values) => {\n    if(textDiv!=null){\n      textDiv.style.left = values.position.x2 + 'px'\n      textDiv.style.top = values.position.y2 + 'px'\n    }\n  })\ntextObj3.onValuesChange((values) => {\n  if(textDiv!=null){\n    textDiv.style.left = values.position.x3 + 'px'\n    textDiv.style.top = values.position.y3 + 'px'\n  }\n})\n  if (textDiv!=null)\n    textDiv.innerText=textObj1.value.content      \n  component?.addEventListener(\"mouseout\", () => {\n    if (fl==false){\n      if (textDiv!=null)\n        textDiv.innerText=textObj1.value.content\n      component.style.background=\"#6200ee\"\n    }\n  })\n  component?.addEventListener(\"mouseover\", () => {\n    if (fl==false){\n      component.style.background=\"#facc15\"\n      if (textDiv!=null)\n        textDiv.innerText=textObj2.value.content\n    }\n  })\n}\n\nmakeBouncingBox(1)\n\n"]}